<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>OpenID for Verifiable Credential Issuance</title>
<meta content="Torsten Lodderstedt" name="author">
<meta content="Kristina Yasuda" name="author">
<meta content="Tobias Looker" name="author">
<meta content="
       This specification defines an API for the issuance of Verifiable Credentials. 
    " name="description">
<meta content="xml2rfc 2.40.1" name="generator">
<meta content="security" name="keyword">
<meta content="openid" name="keyword">
<meta content="ssi" name="keyword">
<meta content="openid-4-verifiable-credential-issuance-1_0-10" name="ietf.draft">
<link href="./openid-4-verifiable-credential-issuance-1_0-10.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/*
  The margin-left: 0 on <dd> removes all distinction
  between levels from nested <dl>s.  Undo that.
*/
dl.olPercent > dd,
dd {
  margin-left: revert;
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left"></td>
<td class="center">openid-4-verifiable-credential-issuance</td>
<td class="right">December 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Lodderstedt, et al.</td>
<td class="center">Standards Track</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">OpenID Connect</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">openid-4-verifiable-credential-issuance-1_0-10</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-12-06" class="published">6 December 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Lodderstedt</div>
<div class="org">yes.com</div>
</div>
<div class="author">
      <div class="author-name">K. Yasuda</div>
<div class="org">Microsoft</div>
</div>
<div class="author">
      <div class="author-name">T. Looker</div>
<div class="org">Mattr</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">OpenID for Verifiable Credential Issuance</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This specification defines an API for the issuance of Verifiable Credentials.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-overview" class="xref">Overview</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-credential-issuer" class="xref">Credential Issuer</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-oauth-20" class="xref">OAuth 2.0</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-core-concepts" class="xref">Core Concepts</a><a href="#section-toc.1-1.3.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-authorized-code-flow" class="xref">Authorized Code Flow</a><a href="#section-toc.1-1.3.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="xref">3.5</a>.  <a href="#name-pre-authorized-code-flow" class="xref">Pre-Authorized Code Flow</a><a href="#section-toc.1-1.3.2.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-credential-offer-endpoint" class="xref">Credential Offer Endpoint</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-credential-offer" class="xref">Credential Offer</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-credential-offer-response" class="xref">Credential Offer Response</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-authorization-endpoint" class="xref">Authorization Endpoint</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-authorization-request" class="xref">Authorization Request</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1.2.1">
                    <p id="section-toc.1-1.5.2.1.2.1.1"><a href="#section-5.1.1" class="xref">5.1.1</a>.  <a href="#name-request-issuance-of-a-certa" class="xref">Request Issuance of a Certain Credential Type using <code>authorization_details</code> Parameter</a><a href="#section-toc.1-1.5.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1.2.2">
                    <p id="section-toc.1-1.5.2.1.2.2.1"><a href="#section-5.1.2" class="xref">5.1.2</a>.  <a href="#name-using-scope-parameter-to-re" class="xref">Using <code>scope</code> Parameter to Request Issuance of a Credential</a><a href="#section-toc.1-1.5.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1.2.3">
                    <p id="section-toc.1-1.5.2.1.2.3.1"><a href="#section-5.1.3" class="xref">5.1.3</a>.  <a href="#name-additional-request-paramete" class="xref">Additional Request Parameters</a><a href="#section-toc.1-1.5.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1.2.4">
                    <p id="section-toc.1-1.5.2.1.2.4.1"><a href="#section-5.1.4" class="xref">5.1.4</a>.  <a href="#name-pushed-authorization-reques" class="xref">Pushed Authorization Request</a><a href="#section-toc.1-1.5.2.1.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1.2.5">
                    <p id="section-toc.1-1.5.2.1.2.5.1"><a href="#section-5.1.5" class="xref">5.1.5</a>.  <a href="#name-dynamic-credential-request" class="xref">Dynamic Credential Request</a><a href="#section-toc.1-1.5.2.1.2.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-successful-authorization-re" class="xref">Successful Authorization Response</a><a href="#section-toc.1-1.5.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-authorization-error-respons" class="xref">Authorization Error Response</a><a href="#section-toc.1-1.5.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-token-endpoint" class="xref">Token Endpoint</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-token-request" class="xref">Token Request</a><a href="#section-toc.1-1.6.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-successful-token-response" class="xref">Successful Token Response</a><a href="#section-toc.1-1.6.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-token-error-response" class="xref">Token Error Response</a><a href="#section-toc.1-1.6.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-credential-endpoint" class="xref">Credential Endpoint</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-binding-the-issued-credenti" class="xref">Binding the Issued Credential to the identifier of the End-User possessing that Credential</a><a href="#section-toc.1-1.7.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-credential-request" class="xref">Credential Request</a><a href="#section-toc.1-1.7.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2.2.1">
                    <p id="section-toc.1-1.7.2.2.2.1.1"><a href="#section-7.2.1" class="xref">7.2.1</a>.  <a href="#name-proof-types" class="xref">Proof Types</a><a href="#section-toc.1-1.7.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="xref">7.3</a>.  <a href="#name-credential-response" class="xref">Credential Response</a><a href="#section-toc.1-1.7.2.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.3.2.1">
                    <p id="section-toc.1-1.7.2.3.2.1.1"><a href="#section-7.3.1" class="xref">7.3.1</a>.  <a href="#name-credential-error-response" class="xref">Credential Error Response</a><a href="#section-toc.1-1.7.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.3.2.2">
                    <p id="section-toc.1-1.7.2.3.2.2.1"><a href="#section-7.3.2" class="xref">7.3.2</a>.  <a href="#name-credential-issuer-provided-" class="xref">Credential Issuer Provided Nonce</a><a href="#section-toc.1-1.7.2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-batch-credential-endpoint" class="xref">Batch Credential Endpoint</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-batch-credential-request" class="xref">Batch Credential Request</a><a href="#section-toc.1-1.8.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-batch-credential-response" class="xref">Batch Credential Response</a><a href="#section-toc.1-1.8.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="xref">8.3</a>.  <a href="#name-batch-credential-error-resp" class="xref">Batch Credential Error Response</a><a href="#section-toc.1-1.8.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-deferred-credential-endpoin" class="xref">Deferred Credential Endpoint</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-deferred-credential-request" class="xref">Deferred Credential Request</a><a href="#section-toc.1-1.9.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-deferred-credential-respons" class="xref">Deferred Credential Response</a><a href="#section-toc.1-1.9.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-metadata" class="xref">Metadata</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-client-metadata" class="xref">Client Metadata</a><a href="#section-toc.1-1.10.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-credential-issuer-metadata" class="xref">Credential Issuer Metadata</a><a href="#section-toc.1-1.10.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.10.2.2.2.1">
                    <p id="section-toc.1-1.10.2.2.2.1.1"><a href="#section-10.2.1" class="xref">10.2.1</a>.  <a href="#name-credential-issuer-identifie" class="xref">Credential Issuer Identifier</a><a href="#section-toc.1-1.10.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.2.2.2">
                    <p id="section-toc.1-1.10.2.2.2.2.1"><a href="#section-10.2.2" class="xref">10.2.2</a>.  <a href="#name-credential-issuer-metadata-" class="xref">Credential Issuer Metadata Retrieval</a><a href="#section-toc.1-1.10.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.2.2.3">
                    <p id="section-toc.1-1.10.2.2.2.3.1"><a href="#section-10.2.3" class="xref">10.2.3</a>.  <a href="#name-credential-issuer-metadata-p" class="xref">Credential Issuer Metadata Parameters</a><a href="#section-toc.1-1.10.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="xref">10.3</a>.  <a href="#name-oauth-server-metadata" class="xref">OAuth Server Metadata</a><a href="#section-toc.1-1.10.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="xref">11.1</a>.  <a href="#name-trust-between-wallet-and-is" class="xref">Trust between Wallet and Issuer</a><a href="#section-toc.1-1.11.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="xref">11.2</a>.  <a href="#name-pre-authorized-code-flow-2" class="xref">Pre-authorized Code Flow</a><a href="#section-toc.1-1.11.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.11.2.2.2.1">
                    <p id="section-toc.1-1.11.2.2.2.1.1"><a href="#section-11.2.1" class="xref">11.2.1</a>.  <a href="#name-replay-prevention" class="xref">Replay Prevention</a><a href="#section-toc.1-1.11.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11.2.2.2.2">
                    <p id="section-toc.1-1.11.2.2.2.2.1"><a href="#section-11.2.2" class="xref">11.2.2</a>.  <a href="#name-pin-code-phishing" class="xref">PIN Code Phishing</a><a href="#section-toc.1-1.11.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11.2.3">
                <p id="section-toc.1-1.11.2.3.1"><a href="#section-11.3" class="xref">11.3</a>.  <a href="#name-credential-lifecycle-manage" class="xref">Credential Lifecycle Management</a><a href="#section-toc.1-1.11.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-implementation-consideratio" class="xref">Implementation Considerations</a><a href="#section-toc.1-1.12.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="xref">12.1</a>.  <a href="#name-claim-based-binding-of-the-" class="xref">Claim-based Binding of the Credential to the End-User possessing the Credential</a><a href="#section-toc.1-1.12.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="xref">12.2</a>.  <a href="#name-binding-of-the-credential-w" class="xref">Binding of the Credential without Cryptographic Binding nor Claim-based Binding</a><a href="#section-toc.1-1.12.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.12.2.3">
                <p id="section-toc.1-1.12.2.3.1"><a href="#section-12.3" class="xref">12.3</a>.  <a href="#name-multiple-accesses-to-the-cr" class="xref">Multiple Accesses to the Credential Endpoint</a><a href="#section-toc.1-1.12.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="xref">13</a>. <a href="#name-privacy-considerations" class="xref">Privacy Considerations</a><a href="#section-toc.1-1.13.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="xref">14</a>. <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.14.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="xref">15</a>. <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.15.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-appendix.a" class="xref">Appendix A</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.16.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.16.2.1">
                <p id="section-toc.1-1.16.2.1.1"><a href="#section-a.1" class="xref">A.1</a>.  <a href="#name-well-known-uri-registry" class="xref">Well-Known URI Registry</a><a href="#section-toc.1-1.16.2.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.16.2.1.2.1">
                    <p id="section-toc.1-1.16.2.1.2.1.1"><a href="#section-a.1.1" class="xref">A.1.1</a>.  <a href="#name-registry-contents" class="xref">Registry Contents</a><a href="#section-toc.1-1.16.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#section-appendix.b" class="xref">Appendix B</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.17.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#section-appendix.c" class="xref">Appendix C</a>.  <a href="#name-notices" class="xref">Notices</a><a href="#section-toc.1-1.18.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#section-appendix.d" class="xref">Appendix D</a>.  <a href="#name-use-cases" class="xref">Use Cases</a><a href="#section-toc.1-1.19.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.19.2.1">
                <p id="section-toc.1-1.19.2.1.1"><a href="#section-d.1" class="xref">D.1</a>.  <a href="#name-credential-offer-same-devic" class="xref">Credential Offer - Same Device</a><a href="#section-toc.1-1.19.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.19.2.2">
                <p id="section-toc.1-1.19.2.2.1"><a href="#section-d.2" class="xref">D.2</a>.  <a href="#name-credential-offer-cross-devi" class="xref">Credential Offer - Cross Device (with information pre-submitted by the User)</a><a href="#section-toc.1-1.19.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.19.2.3">
                <p id="section-toc.1-1.19.2.3.1"><a href="#section-d.3" class="xref">D.3</a>.  <a href="#name-credential-offer-cross-devic" class="xref">Credential Offer - Cross Device &amp; Deferred</a><a href="#section-toc.1-1.19.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.19.2.4">
                <p id="section-toc.1-1.19.2.4.1"><a href="#section-d.4" class="xref">D.4</a>.  <a href="#name-wallet-initiated-issuance-d" class="xref">Wallet Initiated Issuance during Presentation</a><a href="#section-toc.1-1.19.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.19.2.5">
                <p id="section-toc.1-1.19.2.5.1"><a href="#section-d.5" class="xref">D.5</a>.  <a href="#name-wallet-initiated-issuance-du" class="xref">Wallet Initiated Issuance during Presentation (requires presentation of additional Credentials during issuance)</a><a href="#section-toc.1-1.19.2.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a href="#section-appendix.e" class="xref">Appendix E</a>.  <a href="#name-credential-format-profiles" class="xref">Credential Format Profiles</a><a href="#section-toc.1-1.20.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.20.2.1">
                <p id="section-toc.1-1.20.2.1.1"><a href="#section-e.1" class="xref">E.1</a>.  <a href="#name-w3c-verifiable-credentials" class="xref">W3C Verifiable Credentials</a><a href="#section-toc.1-1.20.2.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.20.2.1.2.1">
                    <p id="section-toc.1-1.20.2.1.2.1.1"><a href="#section-e.1.1" class="xref">E.1.1</a>.  <a href="#name-vc-signed-as-a-jwt-not-usin" class="xref">VC signed as a JWT, not using JSON-LD</a><a href="#section-toc.1-1.20.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.20.2.1.2.2">
                    <p id="section-toc.1-1.20.2.1.2.2.1"><a href="#section-e.1.2" class="xref">E.1.2</a>.  <a href="#name-vc-signed-as-a-jwt-using-js" class="xref">VC signed as a JWT, using JSON-LD</a><a href="#section-toc.1-1.20.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.20.2.1.2.3">
                    <p id="section-toc.1-1.20.2.1.2.3.1"><a href="#section-e.1.3" class="xref">E.1.3</a>.  <a href="#name-vc-secured-using-data-integ" class="xref">VC secured using Data Integrity, using JSON-LD, with proof suite requiring Linked Data canonicalization</a><a href="#section-toc.1-1.20.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.20.2.2">
                <p id="section-toc.1-1.20.2.2.1"><a href="#section-e.2" class="xref">E.2</a>.  <a href="#name-iso-mdl" class="xref">ISO mDL</a><a href="#section-toc.1-1.20.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.20.2.2.2.1">
                    <p id="section-toc.1-1.20.2.2.2.1.1"><a href="#section-e.2.1" class="xref">E.2.1</a>.  <a href="#name-format-identifier-4" class="xref">Format Identifier</a><a href="#section-toc.1-1.20.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.20.2.2.2.2">
                    <p id="section-toc.1-1.20.2.2.2.2.1"><a href="#section-e.2.2" class="xref">E.2.2</a>.  <a href="#name-server-metadata-4" class="xref">Server Metadata</a><a href="#section-toc.1-1.20.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.20.2.2.2.3">
                    <p id="section-toc.1-1.20.2.2.2.3.1"><a href="#section-e.2.3" class="xref">E.2.3</a>.  <a href="#name-credential-offer-5" class="xref">Credential Offer</a><a href="#section-toc.1-1.20.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.20.2.2.2.4">
                    <p id="section-toc.1-1.20.2.2.2.4.1"><a href="#section-e.2.4" class="xref">E.2.4</a>.  <a href="#name-authorization-details" class="xref">Authorization Details</a><a href="#section-toc.1-1.20.2.2.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.20.2.2.2.5">
                    <p id="section-toc.1-1.20.2.2.2.5.1"><a href="#section-e.2.5" class="xref">E.2.5</a>.  <a href="#name-credential-request-5" class="xref">Credential Request</a><a href="#section-toc.1-1.20.2.2.2.5.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.20.2.2.2.6">
                    <p id="section-toc.1-1.20.2.2.2.6.1"><a href="#section-e.2.6" class="xref">E.2.6</a>.  <a href="#name-credential-response-5" class="xref">Credential Response</a><a href="#section-toc.1-1.20.2.2.2.6.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.21">
            <p id="section-toc.1-1.21.1"><a href="#section-appendix.f" class="xref">Appendix F</a>.  <a href="#name-document-history" class="xref">Document History</a><a href="#section-toc.1-1.21.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.22">
            <p id="section-toc.1-1.22.1"><a href="#section-appendix.g" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.22.1" class="pilcrow">¶</a></p>
</li>
</ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This specification defines an API that is used to issue verifiable credentials. W3C formats <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span> as well as other Credential formats are supported.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Verifiable Credentials are very similar to identity assertions, like ID Tokens in OpenID Connect <span>[<a href="#OpenID.Core" class="xref">OpenID.Core</a>]</span>, in that they allow a Credential Issuer to assert End-User claims. However, in contrast to the identity assertions, a verifiable credential follows a pre-defined schema (the Credential type) and is typically bound to key material allowing the End-User to prove the legitimate possession of the Credential. This allows secure direct presentation of the Credential from the End-User to the RP, without involvement of the Credential Issuer. This specification caters for those differences.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">Access to this API is authorized using OAuth 2.0 <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>, i.e. the Wallet uses OAuth to obtain authorization to receive verifiable credentials. This way the issuance process can benefit from the proven security, simplicity, and flexibility of OAuth and existing OAuth 2.0 deployments and OpenID Connect OPs (see <span>[<a href="#OpenID.Core" class="xref">OpenID.Core</a>]</span>) can be extended to become Credential Issuers.<a href="#section-1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">Credential<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">A set of one or more claims made by a Credential Issuer (see <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span>). Note that this definition differs from that in <span>[<a href="#OpenID.Core" class="xref">OpenID.Core</a>]</span>.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">Verifiable Credential (VC)<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">A verifiable Credential is a tamper-evident Credential that has authorship that can be cryptographically verified. Verifiable Credentials can be used to build verifiable presentations, which can also be cryptographically verified (see <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span>).<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">Presentation<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">Data derived from one or more Verifiable Credentials, issued by one or more Credential Issuers, that is shared with a specific verifier (see <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span>).<a href="#section-2-6" class="pilcrow">¶</a></p>
<p id="section-2-7">Verified Presentation (VP)<a href="#section-2-7" class="pilcrow">¶</a></p>
<p id="section-2-8">A verifiable presentation is a tamper-evident presentation encoded in such a way that authorship of the data can be trusted after a process of cryptographic verification. Certain types of verifiable presentations might contain data that is synthesized from, but do not contain, the original Verifiable Credentials (for example, zero-knowledge proofs) (see <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span>).<a href="#section-2-8" class="pilcrow">¶</a></p>
<p id="section-2-9">Deferred Credential Issuance<a href="#section-2-9" class="pilcrow">¶</a></p>
<p id="section-2-10">Issuance of Credentials not directly in the response to a Credential issuance request, but following a period of time that can be used to perform certain offline business processes.<a href="#section-2-10" class="pilcrow">¶</a></p>
<p id="section-2-11">Wallet<a href="#section-2-11" class="pilcrow">¶</a></p>
<p id="section-2-12">Entity that receives, stores, presents, and manages Credentials and key material of the End-User. There is no single deployment model of a Wallet: Credentials and keys can both be stored/managed locally by the end-user, or by using a remote self-hosted service, or a remote third party service. In the context of this specification, the Wallet acts as an OAuth 2.0 Client (see <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>) towards the Credential Issuer.<a href="#section-2-12" class="pilcrow">¶</a></p>
<p id="section-2-13">Verifier<a href="#section-2-13" class="pilcrow">¶</a></p>
<p id="section-2-14">Entity that verifies the Credential to make a decision regarding providing a service to the End-User. Also called Relying Party (RP) or Client. During presentation of Credentials, Verifier acts as an OAuth 2.0 Client towards the Wallet acting as an OAuth 2.0 Authorization Server.<a href="#section-2-14" class="pilcrow">¶</a></p>
<p id="section-2-15">Credential Issuer<a href="#section-2-15" class="pilcrow">¶</a></p>
<p id="section-2-16">Entity that issues Verifiable Credentials. Also called Issuer. In the context of this specification, the Credential Issuer acts as OAuth 2.0 Authorization Server (see <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>).<a href="#section-2-16" class="pilcrow">¶</a></p>
<p id="section-2-17">Base64url Encoding<a href="#section-2-17" class="pilcrow">¶</a></p>
<p id="section-2-18">Base64 encoding using the URL- and filename-safe character set defined in Section 5 of <span>[<a href="#RFC4648" class="xref">RFC4648</a>]</span>, with all trailing '=' characters omitted (as permitted by Section 3.2 of <span>[<a href="#RFC4648" class="xref">RFC4648</a>]</span>) and without the inclusion of any line breaks, whitespace, or other additional characters. Note that the base64url encoding of the empty octet sequence is the empty string. (See Appendix C of <span>[<a href="#RFC7515" class="xref">RFC7515</a>]</span> for notes on implementing base64url encoding without padding.)<a href="#section-2-18" class="pilcrow">¶</a></p>
</section>
</div>
<div id="overview">
<section id="section-3">
      <h2 id="name-overview">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-overview" class="section-name selfRef">Overview</a>
      </h2>
<div id="credential-issuer">
<section id="section-3.1">
        <h3 id="name-credential-issuer">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-credential-issuer" class="section-name selfRef">Credential Issuer</a>
        </h3>
<p id="section-3.1-1">This specification defines an API for credential issuance provided by a Credential Issuer. The API is comprised of the following endpoints:<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-3.1-2.1">
            <p id="section-3.1-2.1.1">A mandatory Credential Endpoint from which Credentials can be issued.  See <a href="#credential-endpoint" class="xref">Section 7</a>.<a href="#section-3.1-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.1-2.2">
            <p id="section-3.1-2.2.1">An optional Batch Credential Endpoint from which multiple Credentials can be issued in one request. See <a href="#batch-credential-endpoint" class="xref">Section 8</a>.<a href="#section-3.1-2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.1-2.3">
            <p id="section-3.1-2.3.1">An optional Deferred Credential Endpoint to allow for the deferred delivery of credentials <a href="#deferred-credential-issuance" class="xref">Section 9</a>.<a href="#section-3.1-2.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.1-2.4">
            <p id="section-3.1-2.4.1">An optional mechanism for the Credential Issuer to make a credential offer to the Wallet to encourage the Wallet to start the Issuance Flow. See <a href="#issuance_initiation_endpoint" class="xref">Section 4</a>.<a href="#section-3.1-2.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.1-2.5">
            <p id="section-3.1-2.5.1">A mechanism for the Credential Issuer to publish metadata about the Credentials it is capable of issuing. See <a href="#server-metadata" class="xref">Appendix E.1.2.2</a><a href="#section-3.1-2.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-3.1-3">Both the Credential and the Batch Credential endpoints have the (optional) ability to bind an issued Credential to certain cryptographic key material. Both requests therefore allow to convey a proof of posession for the key material. Multiple proof types are supported.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="oauth-2-0">
<section id="section-3.2">
        <h3 id="name-oauth-20">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-oauth-20" class="section-name selfRef">OAuth 2.0</a>
        </h3>
<p id="section-3.2-1">Every Credential Issuer utilizes an OAuth <span>[<a href="#RFC7636" class="xref">RFC7636</a>]</span> authorization server to authorize access. The same OAuth authorization server can protect one or more Credential Issuers. Wallets determine the authorization server a certain Credential Issuer relies on using the Credential Issuer's metadata.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">All OAuth 2.0 grant types and extensions mechanisms can be used in conjunction with the credential issuance API. Aspects not defined in this specification are expected to follow <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">It is RECOMMENDED to use PKCE as defined in <span>[<a href="#RFC7636" class="xref">RFC7636</a>]</span> to prevent authorization code interception attacks and Pushed Authorization Requests <span>[<a href="#RFC9126" class="xref">RFC9126</a>]</span> to ensure integrity and authenticity of the authorization request.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">Existing OAuth 2.0 mechanisms are extended as following:<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<ul>
<li id="section-3.2-5.1">
            <p id="section-3.2-5.1.1">A new grant type "pre-authorized code" is defined to facilitate a certain class of issuance flow <a href="#pre-authz-code-flow" class="xref">Section 3.5</a>.<a href="#section-3.2-5.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.2-5.2">
            <p id="section-3.2-5.2.1">A new authorization details <span>[<a href="#I-D.ietf-oauth-rar" class="xref">I-D.ietf-oauth-rar</a>]</span> type is defined to convey the details about the Credentials (including formats and types) the Wallet wants to obtain <a href="#authorization-details" class="xref">Section 5.1.1</a>.<a href="#section-3.2-5.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.2-5.3">
            <p id="section-3.2-5.3.1">Client Metadata: new metadata parameter is added to allow a Wallet (acting as OAuth 2.0 client) to publish its Credential Offer Endpoint <a href="#client-metadata" class="xref">Section 10.1</a>.<a href="#section-3.2-5.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.2-5.4">
            <p id="section-3.2-5.4.1">Authorization Endpoint: An additional parameter <code>issuer_state</code> is added to convey state in the context of processing an issuer-initiated credential offer <a href="#credential-authz-request" class="xref">Section 5.1</a>.<a href="#section-3.2-5.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.2-5.5">
            <p id="section-3.2-5.5.1">Token Endpoint: an optional response parameter is added to the token endpoint to provide the client with a nonce to be used for proof of possession of key material in a subsequent request to the Credential endpoint <a href="#token-response" class="xref">Section 6.2</a>.<a href="#section-3.2-5.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
</section>
</div>
<div id="core-concepts">
<section id="section-3.3">
        <h3 id="name-core-concepts">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-core-concepts" class="section-name selfRef">Core Concepts</a>
        </h3>
<p id="section-3.3-1">The Wallet sends one Credential Request per individual Credential to the Credential Endpoint. The wallet MAY use the same access token to send multiple Credential Requests to request issuance of<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-3.3-2.1">
            <p id="section-3.3-2.1.1">multiple Credentials of different types bound to the same proof, or<a href="#section-3.3-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.3-2.2">
            <p id="section-3.3-2.2.1">multiple Credentials of the same type bound to different proofs.<a href="#section-3.3-2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-3.3-3">The Wallet MAY send one Batch Credential Request to the Batch Credential Endpoint to request<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-3.3-4.1">
            <p id="section-3.3-4.1.1">multiple Credentials of different types bound to the same proof, or<a href="#section-3.3-4.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.3-4.2">
            <p id="section-3.3-4.2.1">multiple Credentials of the same type bound to different proofs in the Batch Credential Response.<a href="#section-3.3-4.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-3.3-5">In the course of the authorization process, the Credential Issuer MAY also request Credential presentation as means to authenticate or identify the User during the issuance flow as illustrated in a use case in <a href="#use-case-2" class="xref">Appendix D.5</a>.<a href="#section-3.3-5" class="pilcrow">¶</a></p>
<p id="section-3.3-6">At its core, this specification is Credential format agnostic and allows implementers to leverage specific capabilities of Credential formats of their choice. Multiple Credential formats can be used within the same transaction.<a href="#section-3.3-6" class="pilcrow">¶</a></p>
<p id="section-3.3-7">The specification achieves this by defining<a href="#section-3.3-7" class="pilcrow">¶</a></p>
<ul>
<li id="section-3.3-8.1">
            <p id="section-3.3-8.1.1">Extension points to add Credential format specific parameters or claims in the Credential Issuer metadata, Credential Offer, Authorization Request, Credential Request and Batch Credential Request,<a href="#section-3.3-8.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.3-8.2">
            <p id="section-3.3-8.2.1">Credential format identifiers to identify Credential format specific set of parameters and claims to be applied at each extention point. This set of Credential format specific set of parameters and claims is referred to as a "Credential Format Profile" in this specification.<a href="#section-3.3-8.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-3.3-9">This specification defines Credential Format Profiles for W3C Verifiable Credentials as defined in <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span> and ISO/IEC 18013-5 mDL as defined in <span>[<a href="#ISO.18013-5" class="xref">ISO.18013-5</a>]</span> in <a href="#format_profiles" class="xref">Appendix E</a>. Other specifications or deployments can define their own Credential Format Profiles using above-mentioned extensibility points.<a href="#section-3.3-9" class="pilcrow">¶</a></p>
<p id="section-3.3-10">Note that the issuance can have multiple characteristics, which can be combined depending on the use-cases:<a href="#section-3.3-10" class="pilcrow">¶</a></p>
<ul>
<li id="section-3.3-11.1">
            <p id="section-3.3-11.1.1">Authorization Code Flow or Pre-Authorized Code Flow: the Credential Issuer can obtain user information to turn into a verifiable Credential using user authentication and consent at the Credential Issuer's Authorization Endpoint (Authorization Code Flow), or using out of bound mechanisms outside of the issuance flow (pre-authorized code flow)<a href="#section-3.3-11.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.3-11.2">
            <p id="section-3.3-11.2.1">Wallet initiated or Issuer initiated: the issuance request from the Wallet can be sent to the Credential Issuer without any gesture from the Credential Issuer (Wallet Initiated), or following the communication from the Credential Issuer (Issuer Initiated).<a href="#section-3.3-11.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.3-11.3">
            <p id="section-3.3-11.3.1">Same-device or Cross-device: the Wallet to which the Credential is issued and the Credential Issuer's user experience (website or an app) can reside on the same device, or on different devices.<a href="#section-3.3-11.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-3.3-11.4">
            <p id="section-3.3-11.4.1">Just-in-time or Deferred: the Credential Issuer can issue the Credential directly in response to the Credential Request (just-in-time), or requires time and needs the Wallet to come back to retrieve Credential (deferred).<a href="#section-3.3-11.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-3.3-12">The following sub-sections illusterate some of the authorization flows supported by this specification.<a href="#section-3.3-12" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authorized-code-flow">
<section id="section-3.4">
        <h3 id="name-authorized-code-flow">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-authorized-code-flow" class="section-name selfRef">Authorized Code Flow</a>
        </h3>
<p id="section-3.4-1">Below is a diagram of a Credential issuance using the Authorization Code flow.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">The diagram is based on a Wallet initiated flow illustrated in a use case in <a href="#use-case-1" class="xref">Appendix D.4</a> and does not illustrate all of the optional features.<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<p id="section-3.4-3">ToDo: discuss if need to illustrate the verifier... per use-case-1<a href="#section-3.4-3" class="pilcrow">¶</a></p>
<span id="name-issuance-using-authorizatio"></span><figure id="figure-1">
          <div id="section-3.4-4.1">
<pre class="sourcecode lang-ascii-art">+--------------+   +-----------+                                         +-------------+
| User         |   |   Wallet  |                                         |   Issuer    |
+--------------+   +-----------+                                         +-------------+
        |    interacts   |                                                      |
        |---------------&gt;|                                                      |
        |                | -----                                                |
        |                |      |  Obtains Issuer's server metadata             |
        |                | &lt;----                                                |
        |                |                                                      |
        |                |  (1) Authorization Request                |
        |                |      (type(s) of Credentials to be issued)           |
        |                |-----------------------------------------------------&gt;|
        |                |                                                      |
        |   User Authentication / Consent                                       |
        |                |                                                      |
        |                |      Authorization Response (code)        |
        |                |&lt;-----------------------------------------------------|
        |                |                                                      |
        |                |  (3) Token Request (code)                            |
        |                |-----------------------------------------------------&gt;|
        |                |      Token Response (access_token)                   |
        |                |&lt;-----------------------------------------------------|
        |                |                                                      |
        |                |  (4) Credential Request (access_token, proof(s))     |
        |                |-----------------------------------------------------&gt;|
        |                |      Credential Response                             |
        |                |      (credential(s) OR acceptance_token)             |
        |                |&lt;-----------------------------------------------------|
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-issuance-using-authorizatio" class="selfRef">Issuance using Authorization code flow</a>
          </figcaption></figure>
<p id="section-3.4-5">(1) The Wallet sends an Authorization Request to the Credential Issuer's Authorization Endpoint. Issuer returns Authorization Response with the authorization code upon successfully authenticating and obtaining consent from the End-User. This step happens in the frontchannel, by redirecting the End-User via the user agents. This step is defined in <a href="#authorization_endpoint" class="xref">Section 5</a>.<a href="#section-3.4-5" class="pilcrow">¶</a></p>
<p id="section-3.4-6">(2) The Wallet sends a Token Request to the Credential Issuer's Token Endpoint with the authorization code obtained in step (2). the Credential Issuer returns an Access Token in the Token Request upon successfully validating authorization code. This step happens in the backchannel using server to server communication. This step is defined in <a href="#token_endpoint" class="xref">Section 6</a>.<a href="#section-3.4-6" class="pilcrow">¶</a></p>
<p id="section-3.4-7">(3) The Wallet sends a Credential Request to the Credential Issuer's Credential Endpoint with the Access Token and (optionally) the proof of possession of the public key to which the the issued VC shall be bound. Upon successfully validating Access Token and proof, the Credential Issuer returns a VC in the Credential Response if it is able to issue a Credential right away. This step is defined in <a href="#credential-endpoint" class="xref">Section 7</a>.<a href="#section-3.4-7" class="pilcrow">¶</a></p>
<p id="section-3.4-8">If the Credential Issuer requires more time to issue a Credential, the Credential Issuer may returns an Acceptance Token to the Wallet with the information when the Wallet can start sending Deferred Credential Request to obtain an issued Credential as defined in <a href="#deferred-credential-issuance" class="xref">Section 9</a>.<a href="#section-3.4-8" class="pilcrow">¶</a></p>
<p id="section-3.4-9">If the Issuer wants to issue multiple Credentials in one response, the Issuer MAY support the Batch Credential Endpoint and the Wallet MAY send a Batch Credential Request to the Batch Credential Endpoint as defined in <a href="#batch-credential-endpoint" class="xref">Section 8</a>.<a href="#section-3.4-9" class="pilcrow">¶</a></p>
<p id="section-3.4-10">Note: this flow is based on OAuth 2.0 and the code grant type, but it can be used with other grant types as well.<a href="#section-3.4-10" class="pilcrow">¶</a></p>
</section>
</div>
<div id="pre-authz-code-flow">
<section id="section-3.5">
        <h3 id="name-pre-authorized-code-flow">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-pre-authorized-code-flow" class="section-name selfRef">Pre-Authorized Code Flow</a>
        </h3>
<p id="section-3.5-1">Figure 2 is a diagram of a Credential issuance using Pre-Authorized Code flow. It is a flow where the user authentication and authorization happens prior to the Credential Issuer initiating the issuance flow, without utilizing the Authorization Endpoint. Issuance flow starts after Credentials are ready to be retrieved by the Wallet. See <a href="#use-case-4" class="xref">Appendix D.2</a> for a use case.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<p id="section-3.5-2">How the user provides information required for the issuance of a requested Credential to the Credential Issuer and the business processes conducted by the Credential Issuer to prepare a Credential are out of scope of this specification.<a href="#section-3.5-2" class="pilcrow">¶</a></p>
<p id="section-3.5-3">This flow uses a newly defined OAuth 2.0 grant type "urn:ietf:params:oauth:grant-type:pre-authorized_code".<a href="#section-3.5-3" class="pilcrow">¶</a></p>
<p id="section-3.5-4">The diagram is based on a Credential Issuer initiated flow illustrated in a use case in <a href="#use-case-4" class="xref">Appendix D.2</a> and does not illustrate all of the optional features.<a href="#section-3.5-4" class="pilcrow">¶</a></p>
<span id="name-issuance-using-pre-authoriz"></span><figure id="figure-2">
          <div id="section-3.5-5.1">
<pre class="sourcecode lang-ascii-art">+--------------+   +-----------+                                         +-------------+
| User         |   |   Wallet  |                                         |   Issuer    |
+--------------+   +-----------+                                         +-------------+
        |                |  (0) User provides  information required             |
        |                |      for the issuance of a certain Credential        |
        |----------------------------------------------------------------------&gt;|
        |                |                                                      |
        |                |  (1) Credential Offer (pre-authorized_code)          |
        |                |&lt;-----------------------------------------------------|
        |    interacts   |                                                      |
        |---------------&gt;|                                                      |
        |                | -----                                                |
        |                |      |  Obtains Issuer's server metadata             |
        |                | &lt;----                                                |
        |                |                                                      |
        |                |  (2) Token Request (pre-authorized_code, pin)        |
        |                |-----------------------------------------------------&gt;|
        |                |      Token Response (access_token)                   |
        |                |&lt;-----------------------------------------------------|
        |                |                                                      |
        |                |  (3) Credential Request (access_token, proof(s))     |
        |                |-----------------------------------------------------&gt;|
        |                |      Credential Response                             |
        |                |      (credential(s))                                 |
        |                |&lt;-----------------------------------------------------|
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-issuance-using-pre-authoriz" class="selfRef">Issuance using Pre-Authorized code flow</a>
          </figcaption></figure>
<p id="section-3.5-6">(0) the Credential Issuer successfully obtains consent and user data required for the issuance of a requested Credential from the user using Issuer specific business process.<a href="#section-3.5-6" class="pilcrow">¶</a></p>
<p id="section-3.5-7">(1) The flow begins as the Credential Issuer generates an Credential Offer for certain Credential(s) and communicates it to the Wallet, for example as a QR code or as a deeplink. The Wallet uses information from the Credential Offer to obtain the Credential Issuer's metadata including details about the Credential that this Credential Issuer wants to issue. This step is defined in <a href="#issuance_initiation_endpoint" class="xref">Section 4</a>.<a href="#section-3.5-7" class="pilcrow">¶</a></p>
<p id="section-3.5-8">(2) This step is the same as Step 3 in the Authorization Code Flow, but instead of authorization code, pre-authorized<em>code obtained in step (1) is sent in the Token Request. This step is defined in (#token</em>endpoint).<a href="#section-3.5-8" class="pilcrow">¶</a></p>
<p id="section-3.5-9">(3) This step is the same as Step 4 in the Authorization Code Flow.<a href="#section-3.5-9" class="pilcrow">¶</a></p>
<p id="section-3.5-10">Note that the pre-authorized_code is sent to the Token Endpoint, and not to the Authorization Endpoint.<a href="#section-3.5-10" class="pilcrow">¶</a></p>
<p id="section-3.5-11">It is also important to note that anyone who possesses a valid pre-authorization_code would be able to receive a VC from the Credential Issuer. Implementers MUST implement mitigations most suitable to the use-case.<a href="#section-3.5-11" class="pilcrow">¶</a></p>
<p id="section-3.5-12">One such mechanism defined in this specification is the usage of PIN. If in the Credential Offer the Credential Issuer indicated that the PIN is required, the user is requested to type in a PIN sent via a channel different that the issuance Flow and the PIN is sent to the Credential Issuer in the Token Request.<a href="#section-3.5-12" class="pilcrow">¶</a></p>
<p id="section-3.5-13">For more details and concrete mitigations, see <a href="#security_considerations_pre-authz-code" class="xref">Section 11.2</a>.<a href="#section-3.5-13" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="issuance_initiation_endpoint">
<section id="section-4">
      <h2 id="name-credential-offer-endpoint">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-credential-offer-endpoint" class="section-name selfRef">Credential Offer Endpoint</a>
      </h2>
<p id="section-4-1">This endpoint is used by a Credential Issuer in case it is already in an interaction with a user that wishes to initate a Credential issuance. It is used to pass available information relevant for the Credential issuance to ensure a convenient and secure process.<a href="#section-4-1" class="pilcrow">¶</a></p>
<div id="issuance_initiation_request">
<section id="section-4.1">
        <h3 id="name-credential-offer">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-credential-offer" class="section-name selfRef">Credential Offer</a>
        </h3>
<p id="section-4.1-1">The Credential Issuer sends the request as a HTTP GET request or a HTTP redirect to the Credential Offer Endpoint URL defined in <a href="#client-metadata" class="xref">Section 10.1</a>. This request contains a single URI query parameter <code>credential_offer</code> that contains an Credential Offer object, which is a JSON object with the Credential Offer parameters.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">Credential Offer object may contain the following claims:<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.1-3.1">
            <p id="section-4.1-3.1.1"><code>issuer</code>: REQUIRED. the Credential Issuer URL of the Credential Issuer, the Wallet is requested to obtain one or more Credentials from.<a href="#section-4.1-3.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-4.1-3.2">
            <p id="section-4.1-3.2.1"><code>credentials</code>: REQUIRED. JSON array, where every entry is a JSON Object or a JSON String. If the entry is an object, the object contains the data related to a certain credential type the Wallet MAY request. Each object MUST contain a <code>format</code> Claim determining the format of the credential to be requested and further parameters characterising the type of the credential to be requested as defined in <a href="#format_profiles" class="xref">Appendix E</a>. If the entry is a string, the string value MUST be one of the <code>id</code> values in one of the Supported Credentials Objects in the <code>credentials_supported</code> Credential Issuer metadata parameter. When processing, the wallet MUST resolve this string value to the respective Supported Credentials Object.<a href="#section-4.1-3.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-4.1-3.3">
            <p id="section-4.1-3.3.1"><code>pre-authorized_code</code>: CONDITIONAL. The code representing the Credential Issuer's authorization for the Wallet to obtain Credentials of a certain type. This code MUST be short lived and single-use. MUST be present in a pre-authorized code flow.<a href="#section-4.1-3.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-4.1-3.4">
            <p id="section-4.1-3.4.1"><code>user_pin_required</code>: OPTIONAL. Boolean value specifying whether the Credential Issuer expects presentation of a user PIN along with the Token Request in a pre-authorized code flow. Default is <code>false</code>. This PIN is intended to bind the pre-authorized code to a certain transaction in order to prevent replay of this code by an attacker that, for example, scanned the QR code while standing behind the legit user. It is RECOMMENDED to send a PIN via a separate channel.<a href="#section-4.1-3.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-4.1-3.5">
            <p id="section-4.1-3.5.1"><code>issuer_state</code>: OPTIONAL. String value created by the Credential Issuer and opaque to the Wallet that is used to bind the sub-sequent authorization request with the Credential Issuer to a context set up during previous steps. If the client receives a value for this parameter, it MUST include it in the subsequent Authorization Request to the Credential Issuer as the <code>issuer_state</code> parameter value. MUST NOT be used in Pre-Authorized Code flow when <code>pre-authorized_code</code> is present.<a href="#section-4.1-3.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-4.1-4">This is a non-normative example of an Credential Offer object used to encourage the Wallet to start an authorization code flow<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<div id="section-4.1-5">
<pre class="sourcecode lang-json">{
    "issuer": "https://issuer.example.com",
    "credentials": [
        {
            "format": "jwt_vc_json",
            "types": [
                "VerifiableCredential",
                "UniversityDegreeCredential"
            ]
        }
    ],
    "issuer_state": "eyJhbGciOiJSU0Et...FYUaBy"
}
</pre><a href="#section-4.1-5" class="pilcrow">¶</a>
</div>
<p id="section-4.1-6">and this is how such an object might look like for a pre-authorized code flow:<a href="#section-4.1-6" class="pilcrow">¶</a></p>
<div id="section-4.1-7">
<pre class="sourcecode lang-json">{
    "issuer": "https://issuer.example.com",
    "credentials": [
        {
            "format": "jwt_vc_json",
            "types": [
                "VerifiableCredential",
                "UniversityDegreeCredential"
            ]
        }
    ],
    "pre-authorized_code": "adhjhdjajkdkhjhdj",
    "user_pin_required": true
}
</pre><a href="#section-4.1-7" class="pilcrow">¶</a>
</div>
<p id="section-4.1-8">The following non-normative example shows how the issuer can offer the issuance of two Credentials of different formats, one by reference ("UniversityDegree_JWT") and the other one by value:<a href="#section-4.1-8" class="pilcrow">¶</a></p>
<div id="section-4.1-9">
<pre class="sourcecode lang-json">{
   "issuer": "https://issuer.example.com",
   "credentials": [
      "UniversityDegree_JWT",
      {
         "format": "mso_mdoc",
         "doctype": "org.iso.18013.5.1.mDL"
      }
   ],
   "pre-authorized_code": "adhjhdjajkdkhjhdj",
   "user_pin_required": true
}
</pre><a href="#section-4.1-9" class="pilcrow">¶</a>
</div>
<p id="section-4.1-10">Credential Format Profiles can be found in <a href="#format_profiles" class="xref">Appendix E</a>.<a href="#section-4.1-10" class="pilcrow">¶</a></p>
<p id="section-4.1-11">The Wallet MUST consider the parameter values in the Credential Offer as not trustworthy since the origin is not authenticated and the message integrity is not protected. The Wallet MUST apply the same checks on the Credential Issuer that it would apply when the flow is started from the Wallet itself since the Credential Issuer is not trustworthy just because it sent the Credential Offer. An attacker might attempt to use an initation request to conduct a phishing or injection attack.<a href="#section-4.1-11" class="pilcrow">¶</a></p>
<p id="section-4.1-12">The Wallet MUST NOT accept Credentials just because this mechanism was used. All protocol steps defined in this draft MUST be performed in the same way as if the Wallet would have started the flow.<a href="#section-4.1-12" class="pilcrow">¶</a></p>
<p id="section-4.1-13">The Issuer MUST ensure the release of any privacy-sensitive data is legally based.<a href="#section-4.1-13" class="pilcrow">¶</a></p>
<p id="section-4.1-14">Below is a non-normative example of an Credential Offer:<a href="#section-4.1-14" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.1-15">
<pre>  GET /credential_offer?credential_offer=%7B%22issuer%22:%22https://issuer.example.com
  %22,%22credentials%22:%5B%7B%22format%22:%22jwt_vc_json%22,%22types%22:%5B%22Verifiabl
  eCredential%22,%22UniversityDegreeCredential%22%5D%7D%5D,%22issuer_state%22:%22eyJhbGciOiJS
  U0Et...FYUaBy%22%7D
</pre><a href="#section-4.1-15" class="pilcrow">¶</a>
</div>
<p id="section-4.1-16">The Credential Issuer MAY also render a QR code containing the request data that can be scanned by the user using a Wallet, or a deeplink that the user can click.<a href="#section-4.1-16" class="pilcrow">¶</a></p>
<p id="section-4.1-17">The following is a non-normative example of such a request that can be included in a QR code or a deeplink used to invoke Wallet deployed as a native app:<a href="#section-4.1-17" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-4.1-18">
<pre>openid-credential-offer://credential_offer=%7B%22issuer%22:%22https://issuer.example.com
%22,%22credentials%22:%5B%7B%22format%22:%22jwt_vc_json%22,%22types%22:%5B%22VerifiableCr
edential%22,%22UniversityDegreeCredential%22%5D%7D%5D,%22issuer_state%22:%22eyJhbGciOiJSU0Et...
FYUaBy%22%7D
</pre><a href="#section-4.1-18" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential-offer-response">
<section id="section-4.2">
        <h3 id="name-credential-offer-response">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-credential-offer-response" class="section-name selfRef">Credential Offer Response</a>
        </h3>
<p id="section-4.2-1">The Wallet is not supposed to create a response. UX control stays with the Wallet after completion of the process.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="authorization_endpoint">
<section id="section-5">
      <h2 id="name-authorization-endpoint">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-authorization-endpoint" class="section-name selfRef">Authorization Endpoint</a>
      </h2>
<p id="section-5-1">The Authorization Endpoint is used in the same manner as defined in <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span> taking into account the recommendations given in <span>[<a href="#I-D.ietf-oauth-security-topics" class="xref">I-D.ietf-oauth-security-topics</a>]</span>.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="credential-authz-request">
<section id="section-5.1">
        <h3 id="name-authorization-request">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-authorization-request" class="section-name selfRef">Authorization Request</a>
        </h3>
<p id="section-5.1-1">A Authorization Request is an OAuth 2.0 Authorization Request as defined in section 4.1.1 of <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>, which requests to grant access to the Credential endpoint as defined in <a href="#credential-endpoint" class="xref">Section 7</a>.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">There are two possible ways to request issuance of a specific Credential type in a Authorization Request. One way is to use of the <code>authorization_details</code> request parameter as defined in <span>[<a href="#I-D.ietf-oauth-rar" class="xref">I-D.ietf-oauth-rar</a>]</span> with one or more authorization details objects of type <code>openid_credential</code> <a href="#authorization-details" class="xref">Section 5.1.1</a>. The other is through the use of scopes as defined in <a href="#credential-request-using-type-specific-scope" class="xref">Section 5.1.2</a>.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<div id="authorization-details">
<section id="section-5.1.1">
          <h4 id="name-request-issuance-of-a-certa">
<a href="#section-5.1.1" class="section-number selfRef">5.1.1. </a><a href="#name-request-issuance-of-a-certa" class="section-name selfRef">Request Issuance of a Certain Credential Type using <code>authorization_details</code> Parameter</a>
          </h4>
<p id="section-5.1.1-1">The request parameter <code>authorization_type</code> defined in Section 2 of <span>[<a href="#I-D.ietf-oauth-rar" class="xref">I-D.ietf-oauth-rar</a>]</span> MUST be used to convey the details about the Credentials the Wallet wants to obtain. This specification introduces a new authorization details type <code>openid_credential</code> and defines the following elements to be used with this authorization details type:<a href="#section-5.1.1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-5.1.1-2.1">
              <p id="section-5.1.1-2.1.1"><code>type</code> REQUIRED. JSON string that determines the authorization details type. MUST be set to <code>openid_credential</code> for the purpose of this specification.<a href="#section-5.1.1-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-5.1.1-2.2">
              <p id="section-5.1.1-2.2.1"><code>format</code>: REQUIRED. JSON string representing the format in which the Credential is requested to be issued. This Credential format identifier determines further claims in the authorization details object specifically used to identify the Credential type to be issued. This specification defines Credential Format Profiles in <a href="#format_profiles" class="xref">Appendix E</a>.<br><a href="#section-5.1.1-2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-5.1.1-3">A non-normative example of an <code>authorization_details</code> object.<a href="#section-5.1.1-3" class="pilcrow">¶</a></p>
<div id="section-5.1.1-4">
<pre class="sourcecode lang-json">[
   {
      "type":"openid_credential",
      "format":"jwt_vc_json",
      "types":[
        "VerifiableCredential",
        "UniversityDegreeCredential"
      ]
   }
]
</pre><a href="#section-5.1.1-4" class="pilcrow">¶</a>
</div>
<p id="section-5.1.1-5">If the Credential Issuer metadata contains an <code>authorization_server</code> parameter, the authorization detail's <code>locations</code> common data field MUST be set to the Credential Issuer's identifier value. A non-normative example for a deployment where an AS protects multiple Credential Issuers would look like this:<a href="#section-5.1.1-5" class="pilcrow">¶</a></p>
<div id="section-5.1.1-6">
<pre class="sourcecode lang-json">[
   {
      "type":"openid_credential",
      "locations": ["https://issuer.example.com"],
      "format":"jwt_vc_json",
      "types":[
        "VerifiableCredential",
        "UniversityDegreeCredential"
      ]
   }
]
</pre><a href="#section-5.1.1-6" class="pilcrow">¶</a>
</div>
<p id="section-5.1.1-7">A non-normative example of a Authorization Request using the <code>authorization_details</code> parameter (with line wraps within values for display purposes only).<a href="#section-5.1.1-7" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1.1-8">
<pre>HTTP/1.1 302 Found
Location: https://server.example.com/authorize?
  response_type=code
  &amp;client_id=s6BhdRkqt3
  &amp;code_challenge=E9Melhoa2OwvFrEMTJguCHaoeK1t8URWbuGJSstw-cM
  &amp;code_challenge_method=S256
  &amp;authorization_details=%5B%7B%22type%22:%22openid_credential
  %22,%22format%22:%22jwt_vc_json%22,%22types%22:%5B%22Verifia
  bleCredential%22,%22UniversityDegreeCredential%22%5D%7D%5D
  &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
</pre><a href="#section-5.1.1-8" class="pilcrow">¶</a>
</div>
<p id="section-5.1.1-9">This non-normative example requests authorization to issue two different Credentials:<a href="#section-5.1.1-9" class="pilcrow">¶</a></p>
<div id="section-5.1.1-10">
<pre class="sourcecode lang-json">[
   {
      "type":"openid_credential",
      "format": "ldp_vc",
      "credential_definition": {
         "@context": [
            "https://www.w3.org/2018/credentials/v1",
            "https://www.w3.org/2018/credentials/examples/v1"
         ],
         "types": [
            "VerifiableCredential",
            "UniversityDegreeCredential"
         ]
      }
   },
   {
      "type":"openid_credential",
      "format": "mso_mdoc",
      "doctype":"org.iso.18013.5.1.mDL"
   }
]
</pre><a href="#section-5.1.1-10" class="pilcrow">¶</a>
</div>
<p id="section-5.1.1-11">Note: applications MAY combine authorizarion details of type <code>openid_credential</code> with any other authorization details type in an Authorization Request.<a href="#section-5.1.1-11" class="pilcrow">¶</a></p>
</section>
</div>
<div id="credential-request-using-type-specific-scope">
<section id="section-5.1.2">
          <h4 id="name-using-scope-parameter-to-re">
<a href="#section-5.1.2" class="section-number selfRef">5.1.2. </a><a href="#name-using-scope-parameter-to-re" class="section-name selfRef">Using <code>scope</code> Parameter to Request Issuance of a Credential</a>
          </h4>
<p id="section-5.1.2-1">In addition to a mechanism defined in <a href="#credential-authz-request" class="xref">Section 5.1</a>, Credential Issuers MAY support requesting authorization to issue a credential using OAuth 2.0 scope values.<a href="#section-5.1.2-1" class="pilcrow">¶</a></p>
<p id="section-5.1.2-2">The concrete scope values and the mapping between a certain scope value and the credential type (and further parameters associated with the authorization to issue this credential type) is out of scope of this specification. Possible options include normative text in a profile of this specification defining scope values along with a description of their semantics or machine readable definitions in the Credential Issuer's metadata such as mapping a scope value to an equivalent authorization details object (see above).<a href="#section-5.1.2-2" class="pilcrow">¶</a></p>
<p id="section-5.1.2-3">It is RECOMMENDED to use collision-resistant scopes values.<a href="#section-5.1.2-3" class="pilcrow">¶</a></p>
<p id="section-5.1.2-4">Credential Issuers MUST interpret each scope value as a request to access the Credential Endpoint as defined in <a href="#credential-endpoint" class="xref">Section 7</a> for the issuance of a Credential type identified by that scope value. Multiple scope values MAY be present in a single request whereby each
occurrence MUST be interpreted individually.<a href="#section-5.1.2-4" class="pilcrow">¶</a></p>
<p id="section-5.1.2-5">Providers that do not understand the value of this scope in a request MUST ignore it entirely.<a href="#section-5.1.2-5" class="pilcrow">¶</a></p>
<p id="section-5.1.2-6">If the Credential Issuer metadata contains an <code>authorization_server</code> property, the authorization request MUST also contain a <code>resource</code> parameter <span>[<a href="#RFC8707" class="xref">RFC8707</a>]</span> whose value is the Credential Issuer's identifier value.<a href="#section-5.1.2-6" class="pilcrow">¶</a></p>
<p id="section-5.1.2-7">Below is a non-normative example of a Authorization Request using the scope <code>com.example.healthCardCredential</code>:<a href="#section-5.1.2-7" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1.2-8">
<pre>HTTP/1.1 302 Found
Location: https://server.example.com/authorize?
  response_type=code
  &amp;scope=com.example.healthCardCredential
  &amp;resource=https://issuer.example.com
  &amp;client_id=s6BhdRkqt3
  &amp;code_challenge=E9Melhoa2OwvFrEMTJguCHaoeK1t8URWbuGJSstw-cM
  &amp;code_challenge_method=S256
  &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
</pre><a href="#section-5.1.2-8" class="pilcrow">¶</a>
</div>
<p id="section-5.1.2-9">If a scope value related to credential issuance and the <code>authorization_details</code> request parameter containing objects of type <code>openid_credential</code> are both present in a single request, the provider MUST interpret these individually. However, if both request the same Credential type, than the Credential Issuer MUST follow the request as given by the authorization details object.<a href="#section-5.1.2-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="additional-request-parameters">
<section id="section-5.1.3">
          <h4 id="name-additional-request-paramete">
<a href="#section-5.1.3" class="section-number selfRef">5.1.3. </a><a href="#name-additional-request-paramete" class="section-name selfRef">Additional Request Parameters</a>
          </h4>
<p id="section-5.1.3-1">This specification defines the following request parameters that can be supplied in a Authorization Request:<a href="#section-5.1.3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-5.1.3-2.1">
              <p id="section-5.1.3-2.1.1"><code>wallet_issuer</code>: OPTIONAL. JSON String containing the Wallet's OpenID Connect issuer URL. The Credential Issuer will use the discovery process as defined in <span>[<a href="#SIOPv2" class="xref">SIOPv2</a>]</span> to determine the Wallet's capabilities and endpoints. RECOMMENDED in Dynamic Credential Request.<a href="#section-5.1.3-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-5.1.3-2.2">
              <p id="section-5.1.3-2.2.1"><code>user_hint</code>: OPTIONAL. JSON String containing an opaque user hint the Wallet MAY use in subsequent callbacks to optimize the user's experience. RECOMMENDED in Dynamic Credential Request.<a href="#section-5.1.3-2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-5.1.3-2.3">
              <p id="section-5.1.3-2.3.1"><code>issuer_state</code>: OPTIONAL. String value identifying a certain processing context at the Credential Issuer. A value for this parameter is typically passed in an issuance initation request from the Credential Issuer to the Wallet (see (<a href="#issuance_initiation_request" class="xref">Section 4.1</a>). This request parameter is used to pass the <code>issuer_state</code> value back to the Credential Issuer.<a href="#section-5.1.3-2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-5.1.3-3">Note: When processing the Authorization Request, the Credential Issuer MUST take into account that the <code>issuer_state</code> is not guaranteed to originate from this Credential Issuer in all circumstances. It could have been injected by an attacker.<a href="#section-5.1.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="pushed-authorization-request">
<section id="section-5.1.4">
          <h4 id="name-pushed-authorization-reques">
<a href="#section-5.1.4" class="section-number selfRef">5.1.4. </a><a href="#name-pushed-authorization-reques" class="section-name selfRef">Pushed Authorization Request</a>
          </h4>
<p id="section-5.1.4-1">Use of Pushed Authorization Requests is RECOMMENDED to ensure confidentiality, integrity, and authenticity of the request data and to avoid issues due to large requests sizes.<a href="#section-5.1.4-1" class="pilcrow">¶</a></p>
<p id="section-5.1.4-2">Below is a non-normative example of a Pushed Authorization Request:<a href="#section-5.1.4-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.1.4-3">
<pre>POST /op/par HTTP/1.1
    Host: as.example.com
    Content-Type: application/x-www-form-urlencoded

    &amp;response_type=code
    &amp;client_id=CLIENT1234
    &amp;code_challenge=E9Melhoa2OwvFrEMTJguCHaoeK1t8URWbuGJSstw-cM
    &amp;code_challenge_method=S256
    &amp;redirect_uri=https%3A%2F%2Fclient.example.org%2Fcb
    &amp;authorization_details=...
</pre><a href="#section-5.1.4-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="dynamic-credential-request">
<section id="section-5.1.5">
          <h4 id="name-dynamic-credential-request">
<a href="#section-5.1.5" class="section-number selfRef">5.1.5. </a><a href="#name-dynamic-credential-request" class="section-name selfRef">Dynamic Credential Request</a>
          </h4>
<p id="section-5.1.5-1">This step is OPTIONAL. After receiving an Authorization Request from the Client, the Credential Issuer MAY use this step to obtain additional Credentials from the End-User required to proceed with the authorization of the credential issuance, e.g. it may obtain an identity credential and utilize it to identify the user before issuing an additional credential. For a use case, see <a href="#use-case-2" class="xref">Appendix D.5</a>.<a href="#section-5.1.5-1" class="pilcrow">¶</a></p>
<p id="section-5.1.5-2">It is RECOMMENDED that the Credential Issuer uses <span>[<a href="#OpenID4VP" class="xref">OpenID4VP</a>]</span> to dynamically request presentation of additional Credentials. From a protocol perspective, the Credential Issuer then acts as a verifier and sends a presentation request to the Wallet. The Client SHOULD have these Credentials obtained prior to starting a transaction with this Credential Issuer.<a href="#section-5.1.5-2" class="pilcrow">¶</a></p>
<p id="section-5.1.5-3">To enable dynamic callbacks of the Credential Issuer to the end-user's Wallet, the Wallet MAY provide additional parameters <code>Wallet_issuer</code> and <code>user_hint</code> defined in the Authorization Request section of this specification.<a href="#section-5.1.5-3" class="pilcrow">¶</a></p>
<p id="section-5.1.5-4">For non-normative examples of request and response, see section 11.6 in <span>[<a href="#OpenID4VP" class="xref">OpenID4VP</a>]</span>.<a href="#section-5.1.5-4" class="pilcrow">¶</a></p>
<p id="section-5.1.5-5">Note to the editors: need to sort out Credential Issuer's client_id with Wallet and potentially add example with <code>Wallet_issuer</code> and <code>user_hint</code><a href="#section-5.1.5-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="successful-authorization-response">
<section id="section-5.2">
        <h3 id="name-successful-authorization-re">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-successful-authorization-re" class="section-name selfRef">Successful Authorization Response</a>
        </h3>
<p id="section-5.2-1">Authorization Responses MUST be made as defined in <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">Below is a non-normative example of a successful Authorization Response:<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-5.2-3">
<pre>HTTP/1.1 302 Found
  Location: https://Wallet.example.org/cb?
    code=SplxlOBeZQQYbYS6WxSbIA
</pre><a href="#section-5.2-3" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="authorization-error-response">
<section id="section-5.3">
        <h3 id="name-authorization-error-respons">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-authorization-error-respons" class="section-name selfRef">Authorization Error Response</a>
        </h3>
<p id="section-5.3-1">Authorization Error Response MUST be made as defined in <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">When the requested scope value is invalid, unknown, or malformed, the AS should respond with the error code <code>invalid_scope</code> defined in Section 4.1.2.1 of <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>.<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<p id="section-5.3-3">Below is a non-normative example of an unsuccessful Authorization Response.<a href="#section-5.3-3" class="pilcrow">¶</a></p>
<div id="section-5.3-4">
<pre class="sourcecode lang-json=">HTTP/1.1 302 Found
Location: https://client.example.net/cb?
    error=invalid_request
    &amp;error_description=Unsupported%20response_type%20value
</pre><a href="#section-5.3-4" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="token_endpoint">
<section id="section-6">
      <h2 id="name-token-endpoint">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-token-endpoint" class="section-name selfRef">Token Endpoint</a>
      </h2>
<p id="section-6-1">The Token Endpoint issues an Access Token and, optionally, a Refresh Token in exchange for the authorization code that client obtained in a successful Authorization Response. It is used in the same manner as defined in <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span> and follows the recommendations given in <span>[<a href="#I-D.ietf-oauth-security-topics" class="xref">I-D.ietf-oauth-security-topics</a>]</span>.<a href="#section-6-1" class="pilcrow">¶</a></p>
<div id="token-request">
<section id="section-6.1">
        <h3 id="name-token-request">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-token-request" class="section-name selfRef">Token Request</a>
        </h3>
<p id="section-6.1-1">Upon receiving a successful Authorization Response, a Token Request is made as defined in Section 4.1.3 of <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">The following are the extension parameters to the Token Request used in a pre-authorized code flow:<a href="#section-6.1-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-6.1-3.1">
            <p id="section-6.1-3.1.1"><code>pre-authorized_code</code>: CONDITIONAL. The code representing the authorization to obtain Credentials of a certain type. This parameter is required if the <code>grant_type</code> is <code>urn:ietf:params:oauth:grant-type:pre-authorized_code</code>.<a href="#section-6.1-3.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-6.1-3.2">
            <p id="section-6.1-3.2.1"><code>user_pin</code>: OPTIONAL. String value containing a user PIN. This value MUST be present if <code>user_pin_required</code> was set to <code>true</code> in the Credential Offer. The string value MUST consist of maximum 8 numeric characters (the numbers 0 - 9). This parameter MUST only be used, if the <code>grant_type</code> is <code>urn:ietf:params:oauth:grant-type:pre-authorized_code</code>.<a href="#section-6.1-3.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-6.1-4">Requirements around how the client identifies and, if applicable, authenticates itself with the authorization server in the Token Request depend on the grant type.<a href="#section-6.1-4" class="pilcrow">¶</a></p>
<p id="section-6.1-5">For the authorization code grant type, the requirement as as described in Sections 4.1.3 and 3.2.1 of <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span> MUST be followed.<a href="#section-6.1-5" class="pilcrow">¶</a></p>
<p id="section-6.1-6">For the pre-authorized code grant type, authentication of the client is OPTIONAL, as described in Section 3.2.1 of OAuth 2.0 <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span> and consequently, the "client_id" is only needed when a form of client authentication that relies on the parameter is used.<a href="#section-6.1-6" class="pilcrow">¶</a></p>
<p id="section-6.1-7">If the token request contains an <code>authorization_details</code> parameter of type <code>openid_credential</code> and the Credential Issuer's metadata contains an <code>authorization_server</code> parameter, the <code>authorization_details</code> object MUST contain the Credential Issuer's identifier in the <code>locations</code> element.<a href="#section-6.1-7" class="pilcrow">¶</a></p>
<p id="section-6.1-8">If the token request contains a scope value related to credential issuance and the Credential Issuer's metadata contains an <code>authorization_server</code> parameter, the request MUST contain a <code>resource</code> parameter <span>[<a href="#RFC8707" class="xref">RFC8707</a>]</span> whose value is the Credential Issuer's identifier value.<a href="#section-6.1-8" class="pilcrow">¶</a></p>
<p id="section-6.1-9">Below is a non-normative example of a Token Request in an authorization code flow:<a href="#section-6.1-9" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.1-10">
<pre>POST /token HTTP/1.1
  Host: server.example.com
  Content-Type: application/x-www-form-urlencoded
  Authorization: Basic czZCaGRSa3F0MzpnWDFmQmF0M2JW
  grant_type=authorization_code
  &amp;code=SplxlOBeZQQYbYS6WxSbIA
  &amp;code_verifier=dBjftJeZ4CVP-mB92K27uhbUJU1p1r_wW1gFWFOEjXk
  &amp;redirect_uri=https%3A%2F%2FWallet.example.org%2Fcb

</pre><a href="#section-6.1-10" class="pilcrow">¶</a>
</div>
<p id="section-6.1-11">Below is a non-normative example of a Token Request in a pre-authorized code flow (without client authentication):<a href="#section-6.1-11" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.1-12">
<pre>POST /token HTTP/1.1
  Host: server.example.com
  Content-Type: application/x-www-form-urlencoded

  grant_type=urn:ietf:params:oauth:grant-type:pre-authorized_code
  &amp;pre-authorized_code=SplxlOBeZQQYbYS6WxSbIA
  &amp;user_pin=493536
</pre><a href="#section-6.1-12" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="token-response">
<section id="section-6.2">
        <h3 id="name-successful-token-response">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-successful-token-response" class="section-name selfRef">Successful Token Response</a>
        </h3>
<p id="section-6.2-1">Token Requests are made as defined in <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">In addition to the response parameters defined in <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>, the AS MAY return the following parameters:<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-6.2-3.1">
            <p id="section-6.2-3.1.1"><code>c_nonce</code>: OPTIONAL. JSON string containing a nonce to be used to create a proof of possession of key material when requesting a Credential (see <a href="#credential_request" class="xref">Section 7.2</a>).<a href="#section-6.2-3.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-6.2-3.2">
            <p id="section-6.2-3.2.1"><code>c_nonce_expires_in</code>: OPTIONAL. JSON integer denoting the lifetime in seconds of the <code>c_nonce</code>.<a href="#section-6.2-3.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-6.2-3.3">
            <p id="section-6.2-3.3.1"><code>authorization_pending</code>: OPTIONAL. JSON Boolean. In pre-authorized code flow, the Token Request is still pending as the Credential Issuer is waiting for the end user interaction to complete. The client SHOULD repeat the Token Request. Before each new request, the client MUST wait at least the number of seconds specified by the "interval" response parameter. ToDo: clarify boolean.<a href="#section-6.2-3.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-6.2-3.4">
            <p id="section-6.2-3.4.1"><code>interval</code>: OPTIONAL. The minimum amount of time in seconds that the client SHOULD wait between polling requests to the token endpoint in pre-authorized code flow.  If no value is provided, clients MUST use 5 as the default.<a href="#section-6.2-3.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-6.2-4">Upon receiving <code>pre-authorized_code</code>, the Credential Issuer MAY decide to interact with the end-user in the course of the Token Request processing, which might take some time. In such a case, the Credential Issuer SHOULD respond with the error <code>authorization_pending</code> and the new return parameter <code>interval</code>.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
<p id="section-6.2-5">Below is a non-normative example of a Token Response:<a href="#section-6.2-5" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-6.2-6">
<pre>HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store

  {
    "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6Ikp..sHQ",
    "token_type": "bearer",
    "expires_in": 86400,
    "c_nonce": "tZignsnFbp",
    "c_nonce_expires_in": 86400
  }
</pre><a href="#section-6.2-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="token-error-response">
<section id="section-6.3">
        <h3 id="name-token-error-response">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-token-error-response" class="section-name selfRef">Token Error Response</a>
        </h3>
<p id="section-6.3-1">If the Token Request is invalid or unauthorized, the Authorization Server constructs the error response as defined as in Section 5.2 of OAuth 2.0 <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
<p id="section-6.3-2">The following additional clarifications are provided for the following parameters already defined in <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>:<a href="#section-6.3-2" class="pilcrow">¶</a></p>
<p id="section-6.3-3"><code>invalid_request</code>:<a href="#section-6.3-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-6.3-4.1">
            <p id="section-6.3-4.1.1">the Authorization Server does not expect a PIN in the pre-authorized flow but the client provides a PIN<a href="#section-6.3-4.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-6.3-4.2">
            <p id="section-6.3-4.2.1">the Authorization Server expects a PIN in the pre-authorized flow but the client does not provide a PIN<a href="#section-6.3-4.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-6.3-5"><code>invalid_grant</code>:<a href="#section-6.3-5" class="pilcrow">¶</a></p>
<ul>
<li id="section-6.3-6.1">
            <p id="section-6.3-6.1.1">the Authorization Server expects a PIN in the pre-authorized flow but the client provides the wrong PIN<a href="#section-6.3-6.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-6.3-6.2">
            <p id="section-6.3-6.2.1">the user provides the wrong pre-authorized code or the pre-authorized code has expired<a href="#section-6.3-6.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-6.3-7"><code>invalid_client</code>:<a href="#section-6.3-7" class="pilcrow">¶</a></p>
<ul>
<li id="section-6.3-8.1">
            <p id="section-6.3-8.1.1">the client tried to send a token request with a pre-authorized code without client id but the Authorization Server does not support anonymous access<a href="#section-6.3-8.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-6.3-9">Below is a non-normative example Token Error Response:<a href="#section-6.3-9" class="pilcrow">¶</a></p>
<div id="section-6.3-10">
<pre class="sourcecode lang-json=">HTTP/1.1 400 Bad Request
Content-Type: application/json
Cache-Control: no-store
{
   "error": "invalid_request"
}
</pre><a href="#section-6.3-10" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="credential-endpoint">
<section id="section-7">
      <h2 id="name-credential-endpoint">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-credential-endpoint" class="section-name selfRef">Credential Endpoint</a>
      </h2>
<p id="section-7-1">The Credential Endpoint issues a Credential as approved by the End-User upon presentation of a valid Access Token representing this approval.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Communication with the Credential Endpoint MUST utilize TLS.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">The client can request issuance of a Credential of a certain type multiple times, e.g., to associate the Credential with different DIDs/public keys or to refresh a certain Credential.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">If the access token is valid for requesting issuance of multiple Credentials, it is at the client's discretion to decide the order in which to request issuance of multiple Credentials requested in the Authorization Request.<a href="#section-7-4" class="pilcrow">¶</a></p>
<div id="credential-binding">
<section id="section-7.1">
        <h3 id="name-binding-the-issued-credenti">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-binding-the-issued-credenti" class="section-name selfRef">Binding the Issued Credential to the identifier of the End-User possessing that Credential</a>
        </h3>
<p id="section-7.1-1">Issued Credential SHOULD be cryptographically bound to the identifier of the End-User who possesses the Credential. Cryptographic binding allows the Verifier to verify during presentation that the End-User presenting a Credential is the same End-User to whom it was issued. For non-cryptographic type of binding and Credentials issued without any binding, see Implementations Considerations sections <a href="#claim-based-binding" class="xref">Section 12.1</a> and <a href="#no-binding" class="xref">Section 12.2</a>.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">Note that claims in the Credential are usually about the End-User who possesses it, but can be about another entity.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<p id="section-7.1-3">For cryptographic binding, the Client has the following options to provide cryptographic binding material for a requested Credential as defined in <a href="#credential_request" class="xref">Section 7.2</a>:<a href="#section-7.1-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-7.1-4">
          <li id="section-7.1-4.1">
            <p id="section-7.1-4.1.1">Provide proof of control alongside key material (<code>proof</code> that includes <code>sub_jwk</code> or <code>did</code>)<a href="#section-7.1-4.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.1-4.2">
            <p id="section-7.1-4.2.1">Provide only proof of control without the key material (<code>proof</code> that does not include <code>sub_jwk</code> or <code>did</code>)<a href="#section-7.1-4.2.1" class="pilcrow">¶</a></p>
</li>
</ol>
</section>
</div>
<div id="credential_request">
<section id="section-7.2">
        <h3 id="name-credential-request">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-credential-request" class="section-name selfRef">Credential Request</a>
        </h3>
<p id="section-7.2-1">A Client makes a Credential Request to the Credential Endpoint by sending the following parameters in the entity-body of an HTTP POST request using the "application/json" media type.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-7.2-2.1">
            <p id="section-7.2-2.1.1"><code>format</code>: REQUIRED. Format of the Credential to be issued. This Credential format identifier determines further parameters required to determine the type and (optionally) the content of the credential to be issued. Credential Format Profiles consisting of the Credential format specific set of parameters are defined in <a href="#format_profiles" class="xref">Appendix E</a>.<a href="#section-7.2-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2-2.2">
            <p id="section-7.2-2.2.1"><code>proof</code>: OPTIONAL. JSON Object containing proof of possession of the key material the issued Credential shall be bound to. The specification envisions use of different types of proofs for different cryptographic schemes. The <code>proof</code> object MUST contain a <code>proof_type</code> claim of type JSON denoting the concrete proof type. This type determines the further claims in the proof object and its respective processing rules. Proof types are defined in <a href="#proof_types" class="xref">Section 7.2.1</a>.<a href="#section-7.2-2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-7.2-3">The <code>proof</code> element MUST incorporate a <code>c_nonce</code> value generated by the Credential Issuer and the Credential Issuer's identifier (audience) to allow the Credential Issuer to detect replay. The way that data is incorporated depends on the proof type. In a JWT, for example, the <code>c_nonce</code> is conveyd in the <code>nonce</code> claims whereas the audience is conveyed in the <code>aud</code> claim. In a Linked Data proof, for example, the <code>c_nonce</code> is included as the <code>challenge</code> element in the proof object and the Credential Issuer (the intended audience) is included as the <code>domain</code> element.<a href="#section-7.2-3" class="pilcrow">¶</a></p>
<p id="section-7.2-4">Below is a non-normative example of a Credential Request for a credential in JWT VC format (JSON encoding) with a proof type <code>jwt</code>:<a href="#section-7.2-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.2-5">
<pre>POST /credential HTTP/1.1
Host: server.example.com
Content-Type: application/json
Authorization: BEARER czZCaGRSa3F0MzpnWDFmQmF0M2JW

{
   "format":"jwt_vc_json",
   "types":[
      "VerifiableCredential",
      "UniversityDegreeCredential"
   ],
   "proof":{
      "proof_type":"jwt",
      "jwt":"eyJraWQiOiJkaWQ6ZXhhbXBsZTplYmZlYjFmNzEyZWJjNmYxYzI3NmUxMmVjMjEva2V5cy8
      xIiwiYWxnIjoiRVMyNTYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJzNkJoZFJrcXQzIiwiYXVkIjoiaHR
      0cHM6Ly9zZXJ2ZXIuZXhhbXBsZS5jb20iLCJpYXQiOiIyMDE4LTA5LTE0VDIxOjE5OjEwWiIsIm5vbm
      NlIjoidFppZ25zbkZicCJ9.ewdkIkPV50iOeBUqMXCC_aZKPxgihac0aW9EkL1nOzM"
   }
}
</pre><a href="#section-7.2-5" class="pilcrow">¶</a>
</div>
<div id="proof_types">
<section id="section-7.2.1">
          <h4 id="name-proof-types">
<a href="#section-7.2.1" class="section-number selfRef">7.2.1. </a><a href="#name-proof-types" class="section-name selfRef">Proof Types</a>
          </h4>
<p id="section-7.2.1-1">This specification defines the following values for <code>proof_type</code>:<a href="#section-7.2.1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-7.2.1-2.1">
              <p id="section-7.2.1-2.1.1"><code>jwt</code>: objects of this type contain a single <code>jwt</code> element with a JWS <span>[<a href="#RFC7515" class="xref">RFC7515</a>]</span> as proof of possession. The JWT MUST contain the following elements:<a href="#section-7.2.1-2.1.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-7.2.1-2.1.2.1">
                  <p id="section-7.2.1-2.1.2.1.1">in the JWT header,<a href="#section-7.2.1-2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2.1-2.1.2.2">
                  <p id="section-7.2.1-2.1.2.2.1"><code>typ</code>: REQUIRED. MUST be <code>openid4vci-proof+jwt</code>, which explicitly types the proof JWT as recommended in Section 3.11 of <span>[<a href="#RFC8725" class="xref">RFC8725</a>]</span>.<a href="#section-7.2.1-2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2.1-2.1.2.3">
                  <p id="section-7.2.1-2.1.2.3.1"><code>alg</code>: REQUIRED. A digital signature algorithm identifier such as per IANA "JSON Web Signature and Encryption Algorithms" registry. MUST NOT be <code>none</code> or an identifier for a symmetric algorithm (MAC).<a href="#section-7.2.1-2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2.1-2.1.2.4">
                  <p id="section-7.2.1-2.1.2.4.1"><code>kid</code>: CONDITIONAL. JWT header containing the key ID. If the Credential shall be bound to a DID, the <code>kid</code> refers to a DID URL which identifies a particular key in the DID Document that the Credential shall be bound to. MUST NOT be present if <code>jwk</code> or <code>x5c</code> is present.<a href="#section-7.2.1-2.1.2.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2.1-2.1.2.5">
                  <p id="section-7.2.1-2.1.2.5.1"><code>jwk</code>: CONDITIONAL. JWT header containing the key material the new Credential shall be bound to. MUST NOT be present if <code>kid</code> or <code>x5c</code> is present.<a href="#section-7.2.1-2.1.2.5.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2.1-2.1.2.6">
                  <p id="section-7.2.1-2.1.2.6.1"><code>x5c</code>: CONDITIONAL. JWT header containing a certificate or certificate chain corresponding to the key used to sign the JWT. This element may be used to convey a key attestation. In such a case, the actual key certificate will contain attributes related to the key properties. MUST NOT be present if <code>kid</code> or <code>jwk</code> is present.<a href="#section-7.2.1-2.1.2.6.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2.1-2.1.2.7">
                  <p id="section-7.2.1-2.1.2.7.1">in the JWT body,<a href="#section-7.2.1-2.1.2.7.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2.1-2.1.2.8">
                  <p id="section-7.2.1-2.1.2.8.1"><code>iss</code>: REQUIRED (string). The value of this claim MUST be the client_id of the client making the credential request.<a href="#section-7.2.1-2.1.2.8.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2.1-2.1.2.9">
                  <p id="section-7.2.1-2.1.2.9.1"><code>aud</code>: REQUIRED (string). The value of this claim MUST be the Credential Issuer URL of credential issuer.<a href="#section-7.2.1-2.1.2.9.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2.1-2.1.2.10">
                  <p id="section-7.2.1-2.1.2.10.1"><code>iat</code>: REQUIRED (number). The value of this claim MUST be the time at which the proof was issued using the syntax defined in <span>[<a href="#RFC7519" class="xref">RFC7519</a>]</span>.<a href="#section-7.2.1-2.1.2.10.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.2.1-2.1.2.11">
                  <p id="section-7.2.1-2.1.2.11.1"><code>nonce</code>: REQUIRED (string). The value type of this claim MUST be a string, where the value is a <code>c_nonce</code> provided by the credential issuer.<a href="#section-7.2.1-2.1.2.11.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
<p id="section-7.2.1-3">Note: if both <code>jwk</code> and <code>x5c</code> are present, the represented signing key MUST be the same in both.<a href="#section-7.2.1-3" class="pilcrow">¶</a></p>
<p id="section-7.2.1-4">The Credential Issuer MUST validate that the <code>proof</code> is actually signed by a key identified in <code>kid</code> parameter.<a href="#section-7.2.1-4" class="pilcrow">¶</a></p>
<p id="section-7.2.1-5">Below is a non-normative example of a <code>proof</code> parameter (line breaks for display purposes only):<a href="#section-7.2.1-5" class="pilcrow">¶</a></p>
<div id="section-7.2.1-6">
<pre class="sourcecode lang-json">{
  "proof_type": "jwt",
  "jwt": "eyJraWQiOiJkaWQ6ZXhhbXBsZTplYmZlYjFmNzEyZWJjNmYxYzI3NmUxMmVjMjEva2V5cy8
  xIiwiYWxnIjoiRVMyNTYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJzNkJoZFJrcXQzIiwiYXVkIjoiaHR
  0cHM6Ly9zZXJ2ZXIuZXhhbXBsZS5jb20iLCJpYXQiOiIyMDE4LTA5LTE0VDIxOjE5OjEwWiIsIm5vbm
  NlIjoidFppZ25zbkZicCJ9.ewdkIkPV50iOeBUqMXCC_aZKPxgihac0aW9EkL1nOzM"
  }
</pre><a href="#section-7.2.1-6" class="pilcrow">¶</a>
</div>
<p id="section-7.2.1-7">where the JWT looks like this:<a href="#section-7.2.1-7" class="pilcrow">¶</a></p>
<div id="section-7.2.1-8">
<pre class="sourcecode lang-json">{
  "alg": "ES256",
  "kid":"did:example:ebfeb1f712ebc6f1c276e12ec21/keys/1"
}.
{
  "iss": "s6BhdRkqt3",
  "aud": "https://server.example.com",
  "iat": 1659145924,
  "nonce": "tZignsnFbp"
}
</pre><a href="#section-7.2.1-8" class="pilcrow">¶</a>
</div>
<p id="section-7.2.1-9">Here is another example JWT not only proving possession of a private key but also providing key attestation data for that key:<a href="#section-7.2.1-9" class="pilcrow">¶</a></p>
<div id="section-7.2.1-10">
<pre class="sourcecode lang-json">{
  "alg": "ES256",
  "x5c":[&lt;key certificate + certificate chain for attestation&gt;]
}.
{
  "iss": "s6BhdRkqt3",
  "aud": "https://server.example.com",
  "iat": 1659145924,
  "nonce": "tZignsnFbp"
}
</pre><a href="#section-7.2.1-10" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="credential-response">
<section id="section-7.3">
        <h3 id="name-credential-response">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-credential-response" class="section-name selfRef">Credential Response</a>
        </h3>
<p id="section-7.3-1">Credential Response can be Synchronous or Deferred. the Credential Issuer may be able to immediately issue a requested Credential and send it to the Client. In other cases, the Credential Issuer may not be able to immediately issue a requested Credential and would want to send a token to the Client to be used later to receive a Credential when it is ready.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<p id="section-7.3-2">The following claims are used in the Credential Response:<a href="#section-7.3-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-7.3-3.1">
            <p id="section-7.3-3.1.1"><code>format</code>: REQUIRED. JSON string denoting the format of the issued Credential.<a href="#section-7.3-3.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.3-3.2">
            <p id="section-7.3-3.2.1"><code>credential</code>: OPTIONAL. Contains issued Credential. MUST be present when <code>acceptance_token</code> is not returned. MAY be a JSON string or a JSON object, depending on the Credential format. See <a href="#format_profiles" class="xref">Appendix E</a> for the Credential format specific encoding requirements.<a href="#section-7.3-3.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.3-3.3">
            <p id="section-7.3-3.3.1"><code>acceptance_token</code>: OPTIONAL. A JSON string containing a token subsequently used to obtain a Credential. MUST be present when <code>credential</code> is not returned.<a href="#section-7.3-3.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.3-3.4">
            <p id="section-7.3-3.4.1"><code>c_nonce</code>: OPTIONAL. JSON string containing a nonce to be used to create a proof of possession of key material when requesting a Credential (see <a href="#credential_request" class="xref">Section 7.2</a>).<a href="#section-7.3-3.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.3-3.5">
            <p id="section-7.3-3.5.1"><code>c_nonce_expires_in</code>: OPTIONAL. JSON integer denoting the lifetime in seconds of the <code>c_nonce</code>.<a href="#section-7.3-3.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-7.3-4">The <code>format</code> Claim determines the Credential format and encoding of the credential in the Credential Response. Details are defined in the Credential Format Profiles in <a href="#format_profiles" class="xref">Appendix E</a>.<a href="#section-7.3-4" class="pilcrow">¶</a></p>
<p id="section-7.3-5">Credential formats expressed as binary data MUST be base64url-encoded and returned as a JSON string.<a href="#section-7.3-5" class="pilcrow">¶</a></p>
<p id="section-7.3-6">Below is a non-normative example of a Credential Response in a synchronous flow for a credential in JWT VC format (JSON encoded):<a href="#section-7.3-6" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.3-7">
<pre>HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store

{
  "format": "jwt_vc_json"
  "credential" : "LUpixVCWJk0eOt4CXQe1NXK....WZwmhmn9OQp6YxX0a2L",
  "c_nonce": "fGFF7UkhLa",
  "c_nonce_expires_in": 86400
}
</pre><a href="#section-7.3-7" class="pilcrow">¶</a>
</div>
<p id="section-7.3-8">Below is a non-normative example of a Credential Response in a deferred flow:<a href="#section-7.3-8" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.3-9">
<pre>HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store

{
  "acceptance_token": "8xLOxBtZp8",
  "c_nonce": "wlbQc6pCJp",
  "c_nonce_expires_in": 86400
}
</pre><a href="#section-7.3-9" class="pilcrow">¶</a>
</div>
<p id="section-7.3-10">Note: Consider using CIBA Ping/Push OR SSE Poll/Push. Another option would be the Client providing <code>client_notification_token</code> to the Credential Issuer, so that the Credential Issuer sends a Credential response upon successfully receiving a Credential request and then no need for the client to bring an acceptance token, the Credential Issuer will send the Credential once it is issued in a response that includes <code>client_notification_token</code>. (consider SSE options)<a href="#section-7.3-10" class="pilcrow">¶</a></p>
<div id="credential-error-response">
<section id="section-7.3.1">
          <h4 id="name-credential-error-response">
<a href="#section-7.3.1" class="section-number selfRef">7.3.1. </a><a href="#name-credential-error-response" class="section-name selfRef">Credential Error Response</a>
          </h4>
<p id="section-7.3.1-1">When the Credential Request is invalid or unauthorized, the Credential Issuer constructs the error response as defined in this section.<a href="#section-7.3.1-1" class="pilcrow">¶</a></p>
<p id="section-7.3.1-2">The following additional clarifications are provided for the following parameters already defined in section 3.1 of <span>[<a href="#RFC6750" class="xref">RFC6750</a>]</span>:<a href="#section-7.3.1-2" class="pilcrow">¶</a></p>
<p id="section-7.3.1-3"><code>invalid_request</code>:<a href="#section-7.3.1-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-7.3.1-4.1">
              <p id="section-7.3.1-4.1.1">Credential Request was malformed. One or more of the parameters (i.e. <code>format</code>, <code>proof</code>)are missing or malformatted.<a href="#section-7.3.1-4.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-7.3.1-5"><code>invalid_token</code>:<a href="#section-7.3.1-5" class="pilcrow">¶</a></p>
<ul>
<li id="section-7.3.1-6.1">
              <p id="section-7.3.1-6.1.1">Credential Request contains the wrong Access Token or the Access Token is missing<a href="#section-7.3.1-6.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-7.3.1-7">The following additional error codes are specified:<a href="#section-7.3.1-7" class="pilcrow">¶</a></p>
<ul>
<li id="section-7.3.1-8.1">
              <p id="section-7.3.1-8.1.1"><code>unsupported_credential_type</code>: requested credential type is not supported<a href="#section-7.3.1-8.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.3.1-8.2">
              <p id="section-7.3.1-8.2.1"><code>unsupported_credential_format</code>:  requested credential format is not supported<a href="#section-7.3.1-8.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-7.3.1-8.3">
              <p id="section-7.3.1-8.3.1"><code>invalid_or_missing_proof</code> - Credential Request did not contain a <code>proof</code>, or <code>proof</code> was invalid, i.e. it was not bound to a Credential Issuer provided nonce<a href="#section-7.3.1-8.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-7.3.1-9">This is a non-normative example of a Credential Error Response:<a href="#section-7.3.1-9" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.3.1-10">
<pre>HTTP/1.1 400 Bad Request
Content-Type: application/json
Cache-Control: no-store

{
   "error": "invalid_request"
}
</pre><a href="#section-7.3.1-10" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential-issuer-provided-nonce">
<section id="section-7.3.2">
          <h4 id="name-credential-issuer-provided-">
<a href="#section-7.3.2" class="section-number selfRef">7.3.2. </a><a href="#name-credential-issuer-provided-" class="section-name selfRef">Credential Issuer Provided Nonce</a>
          </h4>
<p id="section-7.3.2-1">Upon receiving a Credential Request, the Credential Issuer MAY require the client to send a proof of possession of the key material it wants a Credential to be bound to. This proof MUST incorporate a nonce generated by the Credential Issuer. The Credential Issuer will provide the client with a nonce in an error response to any Credential Request not including such a proof or including an invalid proof.<a href="#section-7.3.2-1" class="pilcrow">¶</a></p>
<p id="section-7.3.2-2">Below is a non-normative example of a Credential Response when the Credential Issuer is requesting a Wallet to provide in a subsequent Credential Request a <code>proof</code> that is bound to a <code>c_nonce</code>:<a href="#section-7.3.2-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-7.3.2-3">
<pre>HTTP/1.1 400 Bad Request
  Content-Type: application/json
  Cache-Control: no-store

{
  "error": "invalid_or_missing_proof"
  "error_description":
       "Credential Issuer requires proof to be bound to a Credential Issuer provided nonce."
  "c_nonce": "8YE9hCnyV2",
  "c_nonce_expires_in": 86400
}
</pre><a href="#section-7.3.2-3" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="batch-credential-endpoint">
<section id="section-8">
      <h2 id="name-batch-credential-endpoint">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-batch-credential-endpoint" class="section-name selfRef">Batch Credential Endpoint</a>
      </h2>
<p id="section-8-1">The Batch Credential Endpoint issues multiple Credentials in one Batch Credential Response as approved by the End-User upon presentation of a valid Access Token representing this approval.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">Communication with the Batch Credential Endpoint MUST utilize TLS.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">The client can request issuance of multiple Credentials of certain types and formats in one Batch Credential Request. This includes Credentials of the same type and multiple formats, different types and one format, or both.<a href="#section-8-3" class="pilcrow">¶</a></p>
<div id="batch-credential_request">
<section id="section-8.1">
        <h3 id="name-batch-credential-request">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-batch-credential-request" class="section-name selfRef">Batch Credential Request</a>
        </h3>
<p id="section-8.1-1">The Batch Credential Endpoint allows a client to send multiple Credential Request objects (see <a href="#credential_request" class="xref">Section 7.2</a>) to request the issuance of multiple credential at once.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">The following claims are used in the Batch Credential Request:<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-8.1-3.1">
            <p id="section-8.1-3.1.1"><code>credential_requests</code>: REQUIRED. JSON array that contains Credential Request objects as defined in <a href="#credential_request" class="xref">Section 7.2</a>.<a href="#section-8.1-3.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-8.1-4">Below is a non-normative example of a Batch Credential Request:<a href="#section-8.1-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.1-5">
<pre>POST /batch_credential HTTP/1.1
Host: server.example.com
Content-Type: application/json
Authorization: BEARER czZCaGRSa3F0MzpnWDFmQmF0M2JW

{
   "credential_requests":[
      {
         "format":"jwt_vc_json",
         "types":[
            "VerifiableCredential",
            "UniversityDegreeCredential"
         ],
         "proof":{
            "proof_type":"jwt",
            "jwt":"eyJraWQiOiJkaWQ6ZXhhbXBsZTpl...C_aZKPxgihac0aW9EkL1nOzM"
         }
      },
      {
         "format":"mso_mdoc",
         "doctype":"org.iso.18013.5.1.mDL",
         "proof":{
            "proof_type":"jwt",
            "jwt":"eyJraWQiOiJkaWQ6ZXhhbXBsZ...KPxgihac0aW9EkL1nOzM"
         }
      }
   ]
}
</pre><a href="#section-8.1-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="batch-credential_response">
<section id="section-8.2">
        <h3 id="name-batch-credential-response">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-batch-credential-response" class="section-name selfRef">Batch Credential Response</a>
        </h3>
<p id="section-8.2-1">The following claims are used in the Batch Credential Response:
* <code>credential_responses</code>: REQUIRED. JSON array that contains Credential Response objects as defined in <a href="#credential_request" class="xref">Section 7.2</a> and/or Deferred Credential Response objects as defined in <a href="#deferred-credential_request" class="xref">Section 9.1</a>. Every entry of the array corresponds to the Credential Request object at the same array index in the <code>credential_requests</code> parameter of the Batch Credential Request.
* <code>c_nonce</code>: OPTIONAL. The <code>c_nonce</code> as defined in <a href="#credential-response" class="xref">Section 7.3</a>.
* <code>c_nonce_expires_in</code>: OPTIONAL. The <code>c_nonce_expires_in</code> as defined in <a href="#credential-response" class="xref">Section 7.3</a>.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2">Below is a non-normative example of a Batch Credential Response in a synchronous flow:<a href="#section-8.2-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2-3">
<pre>HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store

{
  "credential_responses": [{
    "format": "jwt_vc_json",
    "credential" : "eyJraWQiOiJkaWQ6ZXhhbXBsZTpl...C_aZKPxgihac0aW9EkL1nOzM"
  },
  {
    "format": "mso_mdoc",
    "credential" : "YXNkZnNhZGZkamZqZGFza23....29tZTIzMjMyMzIzMjMy"
  }],
  "c_nonce": "fGFF7UkhLa",
  "c_nonce_expires_in": 86400
}
</pre><a href="#section-8.2-3" class="pilcrow">¶</a>
</div>
<p id="section-8.2-4">Below is a non-normative example of a Batch Credential Response that contains Credential Response and Deferred Credential Response objects:<a href="#section-8.2-4" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-8.2-5">
<pre>HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store

{
   "credential_responses":[
      {
         "acceptance_token":"8xLOxBtZp8"
      },
      {
         "format":"jwt_vc_json",
         "credential":"YXNkZnNhZGZkamZqZGFza23....29tZTIzMjMyMzIzMjMy"
      }
   ],
   "c_nonce":"fGFF7UkhLa",
   "c_nonce_expires_in":86400
}
</pre><a href="#section-8.2-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="batch-credential_error_response">
<section id="section-8.3">
        <h3 id="name-batch-credential-error-resp">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-batch-credential-error-resp" class="section-name selfRef">Batch Credential Error Response</a>
        </h3>
<p id="section-8.3-1">The Batch Credential Issuance Endpoint MUST respond with a HTTP status code 4xx in case of an error.<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<p id="section-8.3-2">The Batch Credential Request either succeessfully issues all requested credentials or fails entirely if there is even one credential failed to be issued.<a href="#section-8.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="deferred-credential-issuance">
<section id="section-9">
      <h2 id="name-deferred-credential-endpoin">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-deferred-credential-endpoin" class="section-name selfRef">Deferred Credential Endpoint</a>
      </h2>
<p id="section-9-1">This endpoint is used to issue a Credential previously requested at the Credential endpoint or Batch Credential Endpoint in case the Credential Issuer was not able to immediately issue this Credential.<a href="#section-9-1" class="pilcrow">¶</a></p>
<div id="deferred-credential_request">
<section id="section-9.1">
        <h3 id="name-deferred-credential-request">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-deferred-credential-request" class="section-name selfRef">Deferred Credential Request</a>
        </h3>
<p id="section-9.1-1">This is an HTTP POST request, which accepts an acceptance token as the only parameter. The acceptance token MUST be sent as access token in the HTTP header as shown in the following example.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft" id="section-9.1-2">
<pre>POST /credential_deferred HTTP/1.1
Host: server.example.com
Content-Type: application/x-www-form-urlencoded
Authorization: BEARER 8xLOxBtZp8

</pre><a href="#section-9.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="deferred-credential_response">
<section id="section-9.2">
        <h3 id="name-deferred-credential-respons">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-deferred-credential-respons" class="section-name selfRef">Deferred Credential Response</a>
        </h3>
<p id="section-9.2-1">The deferred Credential Response uses the <code>format</code> and <code>credential</code> parameters as defined in <a href="#credential-response" class="xref">Section 7.3</a>.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="metadata">
<section id="section-10">
      <h2 id="name-metadata">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-metadata" class="section-name selfRef">Metadata</a>
      </h2>
<div id="client-metadata">
<section id="section-10.1">
        <h3 id="name-client-metadata">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-client-metadata" class="section-name selfRef">Client Metadata</a>
        </h3>
<p id="section-10.1-1">This specification defines the following new Client Metadata parameter in addition to <span>[<a href="#RFC7591" class="xref">RFC7591</a>]</span> for Wallets acting as OAuth client:<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-10.1-2.1">
            <p id="section-10.1-2.1.1"><code>credential_offer_endpoint</code>: OPTIONAL. URL of the issuance initation endpoint of a Wallet.<a href="#section-10.1-2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-10.1-3">If the Credential Issuer is unable to perform discovery of the Credential Offer Endpoint URL, the following claimed URL is used: <code>openid-credential-offer://</code>.<a href="#section-10.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="credential-issuer-metadata">
<section id="section-10.2">
        <h3 id="name-credential-issuer-metadata">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-credential-issuer-metadata" class="section-name selfRef">Credential Issuer Metadata</a>
        </h3>
<div id="credential-issuer-identifier">
<section id="section-10.2.1">
          <h4 id="name-credential-issuer-identifie">
<a href="#section-10.2.1" class="section-number selfRef">10.2.1. </a><a href="#name-credential-issuer-identifie" class="section-name selfRef">Credential Issuer Identifier</a>
          </h4>
<p id="section-10.2.1-1">A Credential Issuer is identified by an HTTPS URL. The way the wallet discovers the Credential Issuer's URL is out of scope of this specification.<a href="#section-10.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="credential-issuer-wellknown">
<section id="section-10.2.2">
          <h4 id="name-credential-issuer-metadata-">
<a href="#section-10.2.2" class="section-number selfRef">10.2.2. </a><a href="#name-credential-issuer-metadata-" class="section-name selfRef">Credential Issuer Metadata Retrieval</a>
          </h4>
<p id="section-10.2.2-1">The Credential Issuer's configuration can be retrieved using the Issuer identifier .<a href="#section-10.2.2-1" class="pilcrow">¶</a></p>
<p id="section-10.2.2-2">Credential Issuers publishing Metadata MUST make a JSON document available at the path formed by concatenating the string <code>/.well-known/openid-credential-issuer</code> to the Credential Issuer identifier. The syntax and semantics of .well-known are defined in <span>[<a href="#RFC5785" class="xref">RFC5785</a>]</span> and apply to the Credential Issuer identifier value when it contains no path component.<a href="#section-10.2.2-2" class="pilcrow">¶</a></p>
<p id="section-10.2.2-3"><code>openid-credential-issuer</code> MUST point to a JSON document compliant with this specification and MUST be returned using the <code>application/json</code> content type.<a href="#section-10.2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="credential-issuer-metadata-parameters">
<section id="section-10.2.3">
          <h4 id="name-credential-issuer-metadata-p">
<a href="#section-10.2.3" class="section-number selfRef">10.2.3. </a><a href="#name-credential-issuer-metadata-p" class="section-name selfRef">Credential Issuer Metadata Parameters</a>
          </h4>
<p id="section-10.2.3-1">This specification defines the following Credential Issuer Metadata:<a href="#section-10.2.3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-10.2.3-2.1">
              <p id="section-10.2.3-2.1.1"><code>credential_issuer</code>: REQUIRED. The Credential Issuer's identifier.<a href="#section-10.2.3-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3-2.2">
              <p id="section-10.2.3-2.2.1"><code>authorization_server</code>: OPTIONAL. Identifier of the OAuth authorization server (as defined in <span>[<a href="#RFC8414" class="xref">RFC8414</a>]</span>) the credential issuer relies on for authorization. If this element is omited, the entity providing the Credential Issuer is also acting as AS, i.e. the Credential Issuer's identifier is used to also obtain the authorization server metadata by appending the .well-known location <code>oauth-authorization-server</code> as defined in <span>[<a href="#RFC8414" class="xref">RFC8414</a>]</span>.<a href="#section-10.2.3-2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3-2.3">
              <p id="section-10.2.3-2.3.1"><code>credential_endpoint</code>: REQUIRED. URL of the OP's Credential Endpoint. This URL MUST use the <code>https</code> scheme and MAY contain port, path and query parameter components.<a href="#section-10.2.3-2.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3-2.4">
              <p id="section-10.2.3-2.4.1"><code>batch_credential_endpoint</code>: OPTIONAL. URL of the AS's Batch Credential Endpoint. This URL MUST use the <code>https</code> scheme and MAY contain port, path and query parameter components. If omitted, the OP does not support the Batch Credential Endpoint.<a href="#section-10.2.3-2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-10.2.3-3">The following parameter MUST be used to communicates the specifics of the Credential that the Credential Issuer supports issuance of:<a href="#section-10.2.3-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-10.2.3-4.1">
              <p id="section-10.2.3-4.1.1"><code>credentials_supported</code>: REQUIRED. A JSON array containing a list of JSON objects, each of them representing metadata about a separate credential type that the Credential Issuer can issue. The JSON objects in the array MUST conform to the structure of the <a href="#credential-metadata-object" class="xref">Section 10.2.3.1</a>.<a href="#section-10.2.3-4.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3-4.2">
              <p id="section-10.2.3-4.2.1"><code>display</code>: OPTIONAL. An array of objects, where each object contains display properties of a Credential Issuer for a certain language. Below is a non-exhaustive list of valid parameters that MAY be included:<a href="#section-10.2.3-4.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-10.2.3-4.2.2.1">
                  <p id="section-10.2.3-4.2.2.1.1"><code>name</code>: OPTIONAL. String value of a display name for the Credential Issuer.<a href="#section-10.2.3-4.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3-4.2.2.2">
                  <p id="section-10.2.3-4.2.2.2.1"><code>locale</code>: OPTIONAL. String value that identifies language of this object represented as language tag values defined in BCP47 <span>[<a href="#RFC5646" class="xref">RFC5646</a>]</span>. There MUST be only one object with the same language identifier<a href="#section-10.2.3-4.2.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
<div id="credential-metadata-object">
<section id="section-10.2.3.1">
            <h5 id="name-supported-credentials-objec">
<a href="#section-10.2.3.1" class="section-number selfRef">10.2.3.1. </a><a href="#name-supported-credentials-objec" class="section-name selfRef">Supported Credentials Object</a>
            </h5>
<p id="section-10.2.3.1-1">This section defines the structure of the objects that appear in the <code>credentials_supported</code> metadata element.<a href="#section-10.2.3.1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-10.2.3.1-2.1">
                <p id="section-10.2.3.1-2.1.1"><code>format</code>: REQUIRED. A JSON string identifying the format of this credential, e.g. <code>jwt_vc_json</code> or <code>ldp_vc</code>. Depending on the format value, the Supported Credentials Object contains further elements defining the type and (optionally) particular claims the credential may contain, and informatio how to display the credential. <a href="#format_profiles" class="xref">Appendix E</a> defines Credential Format Profiles introduced by this specification.<a href="#section-10.2.3.1-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.2">
                <p id="section-10.2.3.1-2.2.1"><code>id</code>: OPTIONAL. A JSON String identifying the respective Supported Credentials Object. The value MUST be unique across all <code>credentials_supported</code> entries in the Credential Issuer Metadata.<a href="#section-10.2.3.1-2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.3">
                <p id="section-10.2.3.1-2.3.1"><code>cryptographic_binding_methods_supported</code>: OPTIONAL. Array of case sensitive strings that identify how the Credential is bound to the identifier of the End-User who possesses the Credential as defined in <a href="#credential-binding" class="xref">Section 7.1</a>. A non-exhaustive list of valid values defined by this specification are <code>did</code>, <code>jwk</code>, and <code>mso</code>.<a href="#section-10.2.3.1-2.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.4">
                <p id="section-10.2.3.1-2.4.1"><code>cryptographic_suites_supported</code>: OPTIONAL. Array of case sensitive strings that identify the cryptographic suites that are supported for the <code>cryptographic_binding_methods_supported</code>. Cryptosuites for Credentials in <code>jwt_vc</code> format should use algorithm names defined in <a href="https://www.iana.org/assignments/jose/jose.xhtml#web-signature-encryption-algorithms">IANA JOSE Algorithms Registry</a>. Cryptosuites for Credentials in <code>ldp_vc</code> format should use signature suites names defined in <a href="https://w3c-ccg.github.io/ld-cryptosuite-registry/">Linked Data Cryptographic Suite Registry</a>.<a href="#section-10.2.3.1-2.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.5">
                <p id="section-10.2.3.1-2.5.1"><code>display</code>: OPTIONAL. An array of objects, where each object contains the display properties of the supported credential for a certain language. Below is a non-exhaustive list of parameters that MAY be included. Note that the display name of the supported credential is obtained from <code>display.name</code> and individual claim names from <code>claims.display.name</code> values.<a href="#section-10.2.3.1-2.5.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-10.2.3.1-2.5.2.1">
                    <p id="section-10.2.3.1-2.5.2.1.1"><code>name</code>: REQUIRED. String value of a display name for the Credential.<a href="#section-10.2.3.1-2.5.2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.5.2.2">
                    <p id="section-10.2.3.1-2.5.2.2.1"><code>locale</code>: OPTIONAL. String value that identifies the language of this display object represented as language tag values defined in BCP47 <span>[<a href="#RFC5646" class="xref">RFC5646</a>]</span>. Multiple <code>display</code> objects may be included for separate languages. There MUST be only one object with the same language identifier.<a href="#section-10.2.3.1-2.5.2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.5.2.3">
                    <p id="section-10.2.3.1-2.5.2.3.1"><code>logo</code>: OPTIONAL. A JSON object with information about the logo of the Credential with a following non-exhaustive list of parameters that MAY be included:<a href="#section-10.2.3.1-2.5.2.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.5.2.4">
                    <p id="section-10.2.3.1-2.5.2.4.1"><code>url</code>: OPTIONAL. URL where the Wallet can obtain a logo of the Credential from the Credential Issuer.<a href="#section-10.2.3.1-2.5.2.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.5.2.5">
                    <p id="section-10.2.3.1-2.5.2.5.1"><code>alt_text</code>: OPTIONAL. String value of an alternative text of a logo image.<a href="#section-10.2.3.1-2.5.2.5.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.5.2.6">
                    <p id="section-10.2.3.1-2.5.2.6.1"><code>description</code>: OPTIONAL. String value of a description of the Credential.<a href="#section-10.2.3.1-2.5.2.6.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.5.2.7">
                    <p id="section-10.2.3.1-2.5.2.7.1"><code>background_color</code>: OPTIONAL. String value of a background color of the Credential represented as numerical color values defined in CSS Color Module Level 37 <span>[<a href="#CSS-Color" class="xref">CSS-Color</a>]</span>.<a href="#section-10.2.3.1-2.5.2.7.1" class="pilcrow">¶</a></p>
</li>
<li id="section-10.2.3.1-2.5.2.8">
                    <p id="section-10.2.3.1-2.5.2.8.1"><code>text_color</code>: OPTIONAL. String value of a text color of the Credential represented as numerical color values defined in CSS Color Module Level 37 <span>[<a href="#CSS-Color" class="xref">CSS-Color</a>]</span>.<a href="#section-10.2.3.1-2.5.2.8.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
<p id="section-10.2.3.1-3">It is dependent on the Credential format where the available claims will appear and how they are represented (see <a href="#format_profiles" class="xref">Appendix E</a>).<a href="#section-10.2.3.1-3" class="pilcrow">¶</a></p>
<p id="section-10.2.3.1-4">The following example shows a non-normative example of a Supported Credentials Object for a credential in JWT VC format (JSON encoding).<a href="#section-10.2.3.1-4" class="pilcrow">¶</a></p>
<div id="section-10.2.3.1-5">
<pre class="sourcecode lang-json">{
    "format": "jwt_vc_json",
    "id": "UniversityDegree_JWT",
    "types": [
        "VerifiableCredential",
        "UniversityDegreeCredential"
    ],
    "cryptographic_binding_methods_supported": [
        "did"
    ],
    "cryptographic_suites_supported": [
        "ES256K"
    ],
    "display": [
        {
            "name": "University Credential",
            "locale": "en-US",
            "logo": {
                "url": "https://exampleuniversity.com/public/logo.png",
                "alternative_text": "a square logo of a university"
            },
            "background_color": "#12107c",
            "text_color": "#FFFFFF"
        }
    ],
    "credentialSubject": {
        "given_name": {
            "display": [
                {
                    "name": "Given Name",
                    "locale": "en-US"
                }
            ]
        },
        "last_name": {
            "display": [
                {
                    "name": "Surname",
                    "locale": "en-US"
                }
            ]
        },
        "degree": {},
        "gpa": {
            "display": [
                {
                    "name": "GPA"
                }
            ]
        }
    }
}
</pre><a href="#section-10.2.3.1-5" class="pilcrow">¶</a>
</div>
<p id="section-10.2.3.1-6">Note: The Client MAY use other mechanisms to obtain information about the Verifiable Credentials that a Credential Issuer can issue.<a href="#section-10.2.3.1-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="oauth-server-metadata">
<section id="section-10.3">
        <h3 id="name-oauth-server-metadata">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-oauth-server-metadata" class="section-name selfRef">OAuth Server Metadata</a>
        </h3>
<p id="section-10.3-1">This specification also defines a new OAuth server metadata <span>[<a href="#RFC8414" class="xref">RFC8414</a>]</span> parameter to publish whether the AS the credential issuer relies on for authorization supports anonymous token requests with the pre-authorized grant type. It is defined as follows:<a href="#section-10.3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-10.3-2.1">
            <p id="section-10.3-2.1.1"><code>pre-authorized_grant_anonymous_access_supported</code>: OPTIONAL. A JSON Boolean indicating whether the issuer accepts token requests to exchange a pre-authorized code without client id. The default is <code>false</code>.<a href="#section-10.3-2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-11">
      <h2 id="name-security-considerations">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<div id="trust-between-wallet-and-issuer">
<section id="section-11.1">
        <h3 id="name-trust-between-wallet-and-is">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-trust-between-wallet-and-is" class="section-name selfRef">Trust between Wallet and Issuer</a>
        </h3>
<p id="section-11.1-1">Credential Issuers often want to know what Wallet they are issuing Credentials to and how private keys are managed for the following reasons:<a href="#section-11.1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-11.1-2.1">
            <p id="section-11.1-2.1.1">the Credential Issuer may wants to ensure that private keys are properly protected from exfiltration and replay in order to prevent an adversary from impersonating the legitimate Credential holder by presenting her Credential.<a href="#section-11.1-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-11.1-2.2">
            <p id="section-11.1-2.2.1">the Credential Issuer may also want to ensure that the Wallet managing the Credentials adheres to certain policies and, potentially, was audited and approved under a certain regulatory and/or commercial scheme.<a href="#section-11.1-2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-11.1-3">The following mechanisms in concert can be utilized to fulfill those objectives:<a href="#section-11.1-3" class="pilcrow">¶</a></p>
<p id="section-11.1-4"><strong>Key attestation</strong> is a mechanism where the device or security element in a device asserts the key management policy to the application creating and using this key. The Android Operating System, for example, provides apps with a certificate including a certificate chain asserting that a particular key is managed, for example, by an hardware security module [ref]. The Wallet can provide this data along with the proof of possession in the Credential Request (see <a href="#credential_request" class="xref">Section 7.2</a> for an example) to allow the Credential Issuer to validate the key management policy. This indeed requires the Credential Issuer to rely on the trust anchor of the certificate chain and the respective key management policy. Another variant of this concept is the use of a Qualified Electronic Signature as defined by the eIDAS regulation [ref]. This signatures won't reveal the concrete properties of the associated private key to the Credential Issuer. However, due to the regulatory regime of eIDAS the Credential Issuer can deduce that the signing service manages the private keys according to this regime and fulfills very high security requirements. As another example, FIDO2 allows RPs to obtain an attestation along with the public key from a FIDO authenticator. That implicitly asserts the key management policy since the assertion is bound to a certain authenticator model and its key management capabilities.<a href="#section-11.1-4" class="pilcrow">¶</a></p>
<p id="section-11.1-5"><strong>App Attestation</strong>: Key attestation, however, does not establish trust in the application storing the Credential and producing presentation of that Credential. App attestation as provided by mobile operating systems, e.g. iOS's DeviceCheck or Android's Safetynet, allows a server system to ensure it is communicating to a legitimate instance of its genuine app. Those mechanisms can be utilized to validate the internal integrity of the Wallet (as a whole).<a href="#section-11.1-5" class="pilcrow">¶</a></p>
<p id="section-11.1-6"><strong>Device Attestation</strong>: Device Attestation attests the health of the device, on which the Wallet is running, as a whole. It prevents compromises such as a malicious third party application tampering with a Wallet that manages keys and Credentials, which cannot be captured only by obtaining app attestation of a Wallet.<a href="#section-11.1-6" class="pilcrow">¶</a></p>
<p id="section-11.1-7"><strong>Client authentication</strong> allows a Wallet to authenticate with a Credential Issuer. In order to securely authenticate, the Wallet needs to utilize a backend component managing the key material and processing the secure communication with the Credential Issuer. the Credential Issuer may establish trust with the Wallet based on its own auditing or a trusted 3rd party attestation of the conformance of the Wallet to a certain policy.<a href="#section-11.1-7" class="pilcrow">¶</a></p>
<p id="section-11.1-8">Directly using key, app and/or device attestations to proof certain capabilities towards a Credential Issuer is an obvious option. However, this at least requires platform mechanisms that issue signed assertions that 3rd parties can evaluate, which is not always the case (e.g. iOS's DeviceCheck). Also, such an approach creates dependencies on platform specific mechanisms, trust anchors, and platform specific identifiers (e.g. Android <code>apkPackageName</code>) and it reveals information about the internal design of a Wallet. Implementers should take that consequences into account.<a href="#section-11.1-8" class="pilcrow">¶</a></p>
<p id="section-11.1-9">The approach recommended by this specification is that the Credential Issuer relies on the OAuth 2.0 client authentication to establish trust in the Wallet and leaves it to the Wallet to ensure its internal integrity using app and key attestation (if required). This establishes a clean separation between the different hemispheres and a uniform interface irrespectively of the Wallet's architecture (e.g. native vs web Wallet). Client authentication can be performed with Credentials registered with the Credential Issuer or with assertions issued to the Wallet by a 3rd party the Credential Issuer trusts for the purpose of client authentication.<a href="#section-11.1-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security_considerations_pre-authz-code">
<section id="section-11.2">
        <h3 id="name-pre-authorized-code-flow-2">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-pre-authorized-code-flow-2" class="section-name selfRef">Pre-authorized Code Flow</a>
        </h3>
<div id="replay-prevention">
<section id="section-11.2.1">
          <h4 id="name-replay-prevention">
<a href="#section-11.2.1" class="section-number selfRef">11.2.1. </a><a href="#name-replay-prevention" class="section-name selfRef">Replay Prevention</a>
          </h4>
<p id="section-11.2.1-1">The pre-authorized code flow is vulnerable to the replay of the pre-authorized code, because by design it is not bound to a certain device (as the authorization code flow does with PKCE). This means an attacker can replay at another device the pre-authorized code meant for a victime, e.g., the attacker can scan the QR code while it is displayed on the victim's screen, and thereby getg access to the Credential. Such replay attacks must be prevented using other means. The design facilitates the following options:<a href="#section-11.2.1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-11.2.1-2.1">
              <p id="section-11.2.1-2.1.1">User PIN: the Credential Issuer might set up a PIN with the user (e.g. via text message or email), which needs to be presented in the Token Request.<a href="#section-11.2.1-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-11.2.1-2.2">
              <p id="section-11.2.1-2.2.1">Callback to device where the transaction originated: upon receiving the Token Request, the Credential Issuer asks the user to confirm the originating device (device that displayed the QR code) that the Credential Issuer may proceed with the Credential issuance process. While the Credential Issuer reaches out to the user on the other device to get confirmation, the Credential Issuer returns an <code>authorization_pending</code> error code to the Wallet (as described in <a href="#token-response" class="xref">Section 6.2</a>. The Wallet is required to call the token endpoint again to obtain the access token. If the user does not confirm, the Token Request is returned with the <code>access_denied</code> error code. This flow gives the user on the originating device more control over the issuance process.<a href="#section-11.2.1-2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</section>
</div>
<div id="pin-code-phishing">
<section id="section-11.2.2">
          <h4 id="name-pin-code-phishing">
<a href="#section-11.2.2" class="section-number selfRef">11.2.2. </a><a href="#name-pin-code-phishing" class="section-name selfRef">PIN Code Phishing</a>
          </h4>
<p id="section-11.2.2-1">An attacker might leverage the Credential issuance process and the user's trust into the Wallet to phish PIN codes sent out by a different service that grant attacker access to services other than Credential issuance. The attacker could setup a Credential Issuer site and in parallel to the issuance request trigger transmission of a PIN code to the user's phone from a service other than Credential issuance, e.g. from a payment service. The user would then be asked to enter this PIN into the Wallet and since the Wallet sends this PIN to the token endpoint of the Credential Issuer (the attacker), the attacker would get access to the PIN code, and access to that other service.<a href="#section-11.2.2-1" class="pilcrow">¶</a></p>
<p id="section-11.2.2-2">In order to cope with that issue, the Wallet is RECOMMENDED to interact with trusted Credential Issuers only. In that case, the Wallet would not process an Credential Offer with an untrusted issuer URL. The Wallet MAY also show to the user the endpoint or issuer it will be sending the PIN code and ask the user for confirmation.<a href="#section-11.2.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="credential-lifecycle-management">
<section id="section-11.3">
        <h3 id="name-credential-lifecycle-manage">
<a href="#section-11.3" class="section-number selfRef">11.3. </a><a href="#name-credential-lifecycle-manage" class="section-name selfRef">Credential Lifecycle Management</a>
        </h3>
<p id="section-11.3-1">the Credential Issuer is supposed to be responsible for the lifecycle of its Credentials. This means the Credential Issuer will invalidate Credentials if it deems appropriate, e.g. if it detects fraudulent behavior.<a href="#section-11.3-1" class="pilcrow">¶</a></p>
<p id="section-11.3-2">The Wallet is supposed to detect signs of fraudulant behavior related to the Credential management in the Wallet (e.g. device rooting) and to act upon such signals. Options include Credential revocation at the Credential Issuer and/or invalidation of the key material used to cryptographically bind Credential to the identifier of the End-User possessing that Credential.<a href="#section-11.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="implementation-considerations">
<section id="section-12">
      <h2 id="name-implementation-consideratio">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-implementation-consideratio" class="section-name selfRef">Implementation Considerations</a>
      </h2>
<div id="claim-based-binding">
<section id="section-12.1">
        <h3 id="name-claim-based-binding-of-the-">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-claim-based-binding-of-the-" class="section-name selfRef">Claim-based Binding of the Credential to the End-User possessing the Credential</a>
        </h3>
<p id="section-12.1-1">Credential not cryptographically bound to the identifier of the End-User possessing it (see <a href="#credential-binding" class="xref">Section 7.1</a>), should be bound to the End-User possessing the Credential based on the claims included in that Credential.<a href="#section-12.1-1" class="pilcrow">¶</a></p>
<p id="section-12.1-2">In claim-based binding, no cryptographic binding material is provided. Instead, the issued Credential includes user claims that can be used by the Verifier to verify possession of the Credential by requesting presentation of existing forms of physical or digial identification that includes the same claims (e.g., a driver's license or other ID cards in person, or an online ID verification service).<a href="#section-12.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="no-binding">
<section id="section-12.2">
        <h3 id="name-binding-of-the-credential-w">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-binding-of-the-credential-w" class="section-name selfRef">Binding of the Credential without Cryptographic Binding nor Claim-based Binding</a>
        </h3>
<p id="section-12.2-1">Some Credential Issuers might choose issuing bearer Credentials without either cryptographic binding nor claim-based binding, because they are meant to be presented without proof of possession.<a href="#section-12.2-1" class="pilcrow">¶</a></p>
<p id="section-12.2-2">One such use case is low assurance Credentials such as coupons or tickets.<a href="#section-12.2-2" class="pilcrow">¶</a></p>
<p id="section-12.2-3">Another use case is when the Credential Issuer uses cryptographic schemes that can provide binding to the End-User possessing that Credential without explicit cryptographic material being supplied by the application used by that End-User. For example, in the case of the BBS Signature Scheme, the issued Credential itself is a secret and only derivation of a Credential is presented to the Verifier. Effectively, Credential is bound to the Credential Issuer's signature on the Credential, which becomes a shared secret transferred from the Credential Issuer to the End-User.<a href="#section-12.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="multiple-accesses-to-the-credential-endpoint">
<section id="section-12.3">
        <h3 id="name-multiple-accesses-to-the-cr">
<a href="#section-12.3" class="section-number selfRef">12.3. </a><a href="#name-multiple-accesses-to-the-cr" class="section-name selfRef">Multiple Accesses to the Credential Endpoint</a>
        </h3>
<p id="section-12.3-1">The Credential Endpoint can be accessed multiple times by a Wallet using the same Access Token, even for the same Credential. the Credential Issuer determines if the subsequent successful requests will return the same or an updated Credential, such as having a new expiration time or using the most current End-User claims.<a href="#section-12.3-1" class="pilcrow">¶</a></p>
<p id="section-12.3-2">the Credential Issuer may also decide that the current Access Token is longer be valid and a re-authentication or Token Refresh (see <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>) may be required under the Credential Issuer's discretion. The policies between the Credential Endpoint and the Authorization Server that may change the behavior of what is returned with a new Access Token are beyond the scope of this specification (see <span>[<a href="#RFC6749" class="xref">RFC6749</a>]</span>).<a href="#section-12.3-2" class="pilcrow">¶</a></p>
<p id="section-12.3-3">The action leading to the Wallet performing another Credential Request can also be triggered by a background process, or by the Credential Issuer using an out-of-band mechanism (SMS, email, etc.) to inform the End-User.<a href="#section-12.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="privacy-considerations">
<section id="section-13">
      <h2 id="name-privacy-considerations">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-privacy-considerations" class="section-name selfRef">Privacy Considerations</a>
      </h2>
<p id="section-13-1">TBD<a href="#section-13-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-14">
      <h2 id="name-normative-references">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC6749">[RFC6749]</dt>
<dd>
<span class="refAuthor">Hardt, D., Ed.</span>, <span class="refTitle">"The OAuth 2.0 Authorization Framework"</span>, <span class="seriesInfo">RFC 6749</span>, <span class="seriesInfo">DOI 10.17487/RFC6749</span>, <time datetime="2012-10">October 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6749">https://www.rfc-editor.org/info/rfc6749</a>&gt;</span>. </dd>
<dt id="I-D.ietf-oauth-rar">[I-D.ietf-oauth-rar]</dt>
<dd>
<span class="refAuthor">Lodderstedt, T.</span><span class="refAuthor">, Richer, J.</span><span class="refAuthor">, and B. Campbell</span>, <span class="refTitle">"OAuth 2.0 Rich Authorization Requests"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-oauth-rar-17</span>, <time datetime="2022-12-02">2 December 2022</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-oauth-rar-17.txt">https://www.ietf.org/archive/id/draft-ietf-oauth-rar-17.txt</a>&gt;</span>. </dd>
<dt id="RFC7519">[RFC7519]</dt>
<dd>
<span class="refAuthor">Jones, M.</span><span class="refAuthor">, Bradley, J.</span><span class="refAuthor">, and N. Sakimura</span>, <span class="refTitle">"JSON Web Token (JWT)"</span>, <span class="seriesInfo">RFC 7519</span>, <span class="seriesInfo">DOI 10.17487/RFC7519</span>, <time datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7519">https://www.rfc-editor.org/info/rfc7519</a>&gt;</span>. </dd>
<dt id="RFC7591">[RFC7591]</dt>
<dd>
<span class="refAuthor">Richer, J., Ed.</span><span class="refAuthor">, Jones, M.</span><span class="refAuthor">, Bradley, J.</span><span class="refAuthor">, Machulak, M.</span><span class="refAuthor">, and P. Hunt</span>, <span class="refTitle">"OAuth 2.0 Dynamic Client Registration Protocol"</span>, <span class="seriesInfo">RFC 7591</span>, <span class="seriesInfo">DOI 10.17487/RFC7591</span>, <time datetime="2015-07">July 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7591">https://www.rfc-editor.org/info/rfc7591</a>&gt;</span>. </dd>
<dt id="RFC4648">[RFC4648]</dt>
<dd>
<span class="refAuthor">Josefsson, S.</span>, <span class="refTitle">"The Base16, Base32, and Base64 Data Encodings"</span>, <span class="seriesInfo">RFC 4648</span>, <span class="seriesInfo">DOI 10.17487/RFC4648</span>, <time datetime="2006-10">October 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4648">https://www.rfc-editor.org/info/rfc4648</a>&gt;</span>. </dd>
<dt id="RFC7515">[RFC7515]</dt>
<dd>
<span class="refAuthor">Jones, M.</span><span class="refAuthor">, Bradley, J.</span><span class="refAuthor">, and N. Sakimura</span>, <span class="refTitle">"JSON Web Signature (JWS)"</span>, <span class="seriesInfo">RFC 7515</span>, <span class="seriesInfo">DOI 10.17487/RFC7515</span>, <time datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7515">https://www.rfc-editor.org/info/rfc7515</a>&gt;</span>. </dd>
<dt id="RFC8707">[RFC8707]</dt>
<dd>
<span class="refAuthor">Campbell, B.</span><span class="refAuthor">, Bradley, J.</span><span class="refAuthor">, and H. Tschofenig</span>, <span class="refTitle">"Resource Indicators for OAuth 2.0"</span>, <span class="seriesInfo">RFC 8707</span>, <span class="seriesInfo">DOI 10.17487/RFC8707</span>, <time datetime="2020-02">February 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8707">https://www.rfc-editor.org/info/rfc8707</a>&gt;</span>. </dd>
<dt id="SIOPv2">[SIOPv2]</dt>
<dd>
<span class="refAuthor">Microsoft</span><span class="refAuthor"> and M. B. Jones</span>, <span class="refTitle">"Self-Issued OpenID Provider V2"</span>, <time datetime="2021-12-18">18 December 2021</time>, <span>&lt;<a href="https://openid.net/specs/openid-connect-self-issued-v2-1_0.html">https://openid.net/specs/openid-connect-self-issued-v2-1_0.html</a>&gt;</span>. </dd>
<dt id="RFC6750">[RFC6750]</dt>
<dd>
<span class="refAuthor">Hardt, D.</span><span class="refAuthor"> and M. B. Jones</span>, <span class="refTitle">"The OAuth 2.0 Authorization Framework: Bearer Token Usage"</span>, <time datetime="2012-10">October 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6750">https://www.rfc-editor.org/rfc/rfc6750</a>&gt;</span>. </dd>
<dt id="RFC5785">[RFC5785]</dt>
<dd>
<span class="refAuthor">Nottingham, M.</span><span class="refAuthor"> and E. Hammer-Lahav</span>, <span class="refTitle">"Defining Well-Known Uniform Resource Identifiers (URIs)"</span>, <span class="seriesInfo">RFC 5785</span>, <span class="seriesInfo">DOI 10.17487/RFC5785</span>, <time datetime="2010-04">April 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5785">https://www.rfc-editor.org/info/rfc5785</a>&gt;</span>. </dd>
<dt id="RFC7636">[RFC7636]</dt>
<dd>
<span class="refAuthor">Sakimura, N., Ed.</span><span class="refAuthor">, Bradley, J.</span><span class="refAuthor">, and N. Agarwal</span>, <span class="refTitle">"Proof Key for Code Exchange by OAuth Public Clients"</span>, <span class="seriesInfo">RFC 7636</span>, <span class="seriesInfo">DOI 10.17487/RFC7636</span>, <time datetime="2015-09">September 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7636">https://www.rfc-editor.org/info/rfc7636</a>&gt;</span>. </dd>
<dt id="RFC8414">[RFC8414]</dt>
<dd>
<span class="refAuthor">Jones, M.</span><span class="refAuthor">, Sakimura, N.</span><span class="refAuthor">, and J. Bradley</span>, <span class="refTitle">"OAuth 2.0 Authorization Server Metadata"</span>, <span class="seriesInfo">RFC 8414</span>, <span class="seriesInfo">DOI 10.17487/RFC8414</span>, <time datetime="2018-06">June 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8414">https://www.rfc-editor.org/info/rfc8414</a>&gt;</span>. </dd>
<dt id="RFC5646">[RFC5646]</dt>
<dd>
<span class="refAuthor">Phillips, A., Ed.</span><span class="refAuthor"> and M. Davis, Ed.</span>, <span class="refTitle">"Tags for Identifying Languages"</span>, <span class="seriesInfo">BCP 47</span>, <span class="seriesInfo">RFC 5646</span>, <span class="seriesInfo">DOI 10.17487/RFC5646</span>, <time datetime="2009-09">September 2009</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5646">https://www.rfc-editor.org/info/rfc5646</a>&gt;</span>. </dd>
<dt id="CSS-Color">[CSS-Color]</dt>
<dd>
<span class="refAuthor">Çelik, T.</span><span class="refAuthor">, Lilley, C.</span><span class="refAuthor">, and D. Baron</span>, <span class="refTitle">"CSS Color Module Level 3"</span>, <time datetime="2022-01-18">18 January 2022</time>, <span>&lt;<a href="https://www.w3.org/TR/css-color-3">https://www.w3.org/TR/css-color-3</a>&gt;</span>. </dd>
<dt id="ISO.18013-5">[ISO.18013-5]</dt>
<dd>
<span class="refAuthor">ISO/IEC JTC 1/SC 17 Cards and security devices for personal identification</span>, <span class="refTitle">"ISO/IEC 18013-5:2021 Personal identification - ISO-compliant driving licence - Part 5: Mobile driving licence (mDL) application"</span>, <time datetime="2021">2021</time>, <span>&lt;<a href="https://www.iso.org/standard/69084.html">https://www.iso.org/standard/69084.html</a>&gt;</span>. </dd>
<dt id="I-D.ietf-oauth-security-topics">[I-D.ietf-oauth-security-topics]</dt>
<dd>
<span class="refAuthor">Lodderstedt, T.</span><span class="refAuthor">, Bradley, J.</span><span class="refAuthor">, Labunets, A.</span><span class="refAuthor">, and D. Fett</span>, <span class="refTitle">"OAuth 2.0 Security Best Current Practice"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-oauth-security-topics-21</span>, <time datetime="2022-09-27">27 September 2022</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-oauth-security-topics-21.txt">https://www.ietf.org/archive/id/draft-ietf-oauth-security-topics-21.txt</a>&gt;</span>. </dd>
<dt id="RFC8725">[RFC8725]</dt>
<dd>
<span class="refAuthor">Sheffer, Y.</span><span class="refAuthor">, Hardt, D.</span><span class="refAuthor">, and M. Jones</span>, <span class="refTitle">"JSON Web Token Best Current Practices"</span>, <span class="seriesInfo">BCP 225</span>, <span class="seriesInfo">RFC 8725</span>, <span class="seriesInfo">DOI 10.17487/RFC8725</span>, <time datetime="2020-02">February 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8725">https://www.rfc-editor.org/info/rfc8725</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-15">
      <h2 id="name-informative-references">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
      </h2>
<dl class="references">
<dt id="RFC9126">[RFC9126]</dt>
<dd>
<span class="refAuthor">Lodderstedt, T.</span><span class="refAuthor">, Campbell, B.</span><span class="refAuthor">, Sakimura, N.</span><span class="refAuthor">, Tonge, D.</span><span class="refAuthor">, and F. Skokan</span>, <span class="refTitle">"OAuth 2.0 Pushed Authorization Requests"</span>, <span class="seriesInfo">RFC 9126</span>, <span class="seriesInfo">DOI 10.17487/RFC9126</span>, <time datetime="2021-09">September 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9126">https://www.rfc-editor.org/info/rfc9126</a>&gt;</span>. </dd>
<dt id="OpenID4VP">[OpenID4VP]</dt>
<dd>
<span class="refAuthor">Terbu, O.</span><span class="refAuthor">, Lodderstedt, T.</span><span class="refAuthor">, Yasuda, K.</span><span class="refAuthor">, Lemmon, A.</span><span class="refAuthor">, and T. Looker</span>, <span class="refTitle">"OpenID for Verifiable Presentations"</span>, <time datetime="2022-06-20">20 June 2022</time>, <span>&lt;<a href="https://openid.net/specs/openid-4-verifiable-presentations-1_0.html">https://openid.net/specs/openid-4-verifiable-presentations-1_0.html</a>&gt;</span>. </dd>
<dt id="VC_DATA">[VC_DATA]</dt>
<dd>
<span class="refAuthor">Sporny, M.</span><span class="refAuthor">, Noble, G.</span><span class="refAuthor">, Longley, D.</span><span class="refAuthor">, Burnett, D. C.</span><span class="refAuthor">, Zundel, B.</span><span class="refAuthor">, and D. Chadwick</span>, <span class="refTitle">"Verifiable Credentials Data Model 1.0"</span>, <time datetime="2019-11-19">19 November 2019</time>, <span>&lt;<a href="https://www.w3.org/TR/vc-data-model">https://www.w3.org/TR/vc-data-model</a>&gt;</span>. </dd>
<dt id="OpenID.Core">[OpenID.Core]</dt>
<dd>
<span class="refAuthor">Sakimura, N.</span><span class="refAuthor">, Bradley, J.</span><span class="refAuthor">, Jones, M.</span><span class="refAuthor">, de Medeiros, B.</span><span class="refAuthor">, and C. Mortimore</span>, <span class="refTitle">"OpenID Connect Core 1.0 incorporating errata set 1"</span>, <time datetime="2014-11-08">8 November 2014</time>, <span>&lt;<a href="http://openid.net/specs/openid-connect-core-1_0.html">http://openid.net/specs/openid-connect-core-1_0.html</a>&gt;</span>. </dd>
</dl>
</section>
<div id="iana-considerations">
<section id="section-appendix.a">
      <h2 id="name-iana-considerations">
<a href="#section-appendix.a" class="section-number selfRef">Appendix A. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-appendix.a-1">register "urn:ietf:params:oauth:grant-type:pre-authorized_code"<a href="#section-appendix.a-1" class="pilcrow">¶</a></p>
<p id="section-appendix.a-2">Register "unsupported<em>credential</em>type", "unsupported<em>credential</em>format" and "invalid<em>or</em>missing_nonce"<a href="#section-appendix.a-2" class="pilcrow">¶</a></p>
<div id="well-known-uri-registry">
<section id="section-a.1">
        <h2 id="name-well-known-uri-registry">
<a href="#section-a.1" class="section-number selfRef">A.1. </a><a href="#name-well-known-uri-registry" class="section-name selfRef">Well-Known URI Registry</a>
        </h2>
<p id="section-a.1-1">This specification registers the well-known URI defined in <a href="#credential-issuer-wellknown" class="xref">Section 10.2.2</a> in the IANA Well-Known URI registry defined in RFC 5785 <span>[<a href="#RFC5785" class="xref">RFC5785</a>]</span>.<a href="#section-a.1-1" class="pilcrow">¶</a></p>
<div id="registry-contents">
<section id="section-a.1.1">
          <h3 id="name-registry-contents">
<a href="#section-a.1.1" class="section-number selfRef">A.1.1. </a><a href="#name-registry-contents" class="section-name selfRef">Registry Contents</a>
          </h3>
<ul>
<li id="section-a.1.1-1.1">
              <p id="section-a.1.1-1.1.1">URI suffix: openid-credential-issuer<a href="#section-a.1.1-1.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-a.1.1-1.2">
              <p id="section-a.1.1-1.2.1">Change controller: OpenID Foundation Artifact Binding Working Group - openid-specs-ab@lists.openid.net<a href="#section-a.1.1-1.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-a.1.1-1.3">
              <p id="section-a.1.1-1.3.1">Specification document: <a href="#credential-issuer-wellknown" class="xref">Section 10.2.2</a> of this document<a href="#section-a.1.1-1.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-a.1.1-1.4">
              <p id="section-a.1.1-1.4.1">Related information: (none)<a href="#section-a.1.1-1.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="Acknowledgements">
<section id="section-appendix.b">
      <h2 id="name-acknowledgements">
<a href="#section-appendix.b" class="section-number selfRef">Appendix B. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-appendix.b-1">We would like to thank Daniel McGrogan, David Chadwick, John Bradley, Mark Haine, Alen Horvat, Michael B. Jones, Kenichi Nakamura, Oliver Terbu and David Waite for their valuable contributions to this specification.<a href="#section-appendix.b-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="notices">
<section id="section-appendix.c">
      <h2 id="name-notices">
<a href="#section-appendix.c" class="section-number selfRef">Appendix C. </a><a href="#name-notices" class="section-name selfRef">Notices</a>
      </h2>
<p id="section-appendix.c-1">Copyright (c) 2022 The OpenID Foundation.<a href="#section-appendix.c-1" class="pilcrow">¶</a></p>
<p id="section-appendix.c-2">The OpenID Foundation (OIDF) grants to any Contributor, developer, implementer, or other interested party a non-exclusive, royalty free, worldwide copyright license to reproduce, prepare derivative works from, distribute, perform and display, this Implementers Draft or Final Specification solely for the purposes of (i) developing specifications, and (ii) implementing Implementers Drafts and Final Specifications based on such documents, provided that attribution be made to the OIDF as the source of the material, but that such attribution does not indicate an endorsement by the OIDF.<a href="#section-appendix.c-2" class="pilcrow">¶</a></p>
<p id="section-appendix.c-3">The technology described in this specification was made available from contributions from various sources, including members of the OpenID Foundation and others. Although the OpenID Foundation has taken steps to help ensure that the technology is available for distribution, it takes no position regarding the validity or scope of any intellectual property or other rights that might be claimed to pertain to the implementation or use of the technology described in this specification or the extent to which any license under such rights might or might not be available; neither does it represent that it has made any independent effort to identify any such rights. The OpenID Foundation and the contributors to this specification make no (and hereby expressly disclaim any) warranties (express, implied, or otherwise), including implied warranties of merchantability, non-infringement, fitness for a particular purpose, or title, related to this specification, and the entire risk as to implementing this specification is assumed by the implementer. The OpenID Intellectual Property Rights policy requires contributors to offer a patent promise not to assert certain patent claims against other contributors and against implementers. The OpenID Foundation invites any interested party to bring to its attention any copyrights, patents, patent applications, or other proprietary rights that may cover technology that may be required to practice this specification.<a href="#section-appendix.c-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="use-cases">
<section id="section-appendix.d">
      <h2 id="name-use-cases">
<a href="#section-appendix.d" class="section-number selfRef">Appendix D. </a><a href="#name-use-cases" class="section-name selfRef">Use Cases</a>
      </h2>
<p id="section-appendix.d-1">This is a non-exhaustive list of sample use cases.<a href="#section-appendix.d-1" class="pilcrow">¶</a></p>
<div id="use-case-3">
<section id="section-d.1">
        <h2 id="name-credential-offer-same-devic">
<a href="#section-d.1" class="section-number selfRef">D.1. </a><a href="#name-credential-offer-same-devic" class="section-name selfRef">Credential Offer - Same Device</a>
        </h2>
<p id="section-d.1-1">While browsing the university's home page, the user finds a link "request your digital diploma". User  clicks on this link and is being redirected to a digital Wallet. The Wallet notifies the user that a Credential Issuer offered to issue a diploma Credential. User confirms this inquiry and is taken to the university's Credential issuance service's user experience. After authenticating at the university and consenting to the issuance of a digital diploma, the user is sent back to the Wallet, where she can check the successful creation of the digital diploma.<a href="#section-d.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="use-case-4">
<section id="section-d.2">
        <h2 id="name-credential-offer-cross-devi">
<a href="#section-d.2" class="section-number selfRef">D.2. </a><a href="#name-credential-offer-cross-devi" class="section-name selfRef">Credential Offer - Cross Device (with information pre-submitted by the User)</a>
        </h2>
<p id="section-d.2-1">The user is starting a job at a new employer. An employer has requested the user to upload certain documents to the employee portal. A few days later, the user receives an email from the employer notifying her that the employee Credential is ready and asking her to scan a QR code to retrieve it. User scans the QR code with her smartphone, which opens her Wallet. Meanwhile, the user has received a text message with a PIN code to her smartphone. After entering that PIN code in the Wallet for security reasons, the user confirms the Credential issuance, and receives Credential into the Wallet.<a href="#section-d.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="use-case-5">
<section id="section-d.3">
        <h2 id="name-credential-offer-cross-devic">
<a href="#section-d.3" class="section-number selfRef">D.3. </a><a href="#name-credential-offer-cross-devic" class="section-name selfRef">Credential Offer - Cross Device &amp; Deferred</a>
        </h2>
<p id="section-d.3-1">The user wants to obtain a digital criminal record. She visits the local administration's office and requests the issuance of the official criminal record as a digital Credential. After presenting her ID document, she is asked to scan a QR code with her wallet. She is being told that the actual issuance of the Credential will take some time due to necessary background checks by the authority.<a href="#section-d.3-1" class="pilcrow">¶</a></p>
<p id="section-d.3-2">In the Wallet, the user sees an indication that issuance of the digital record is under way. A few days later, the user receives a notification from her Wallet that requested Credential was successfully issued. When the user opens the Wallet, she is asked whether she wants to download the Credential. She confirms, and the new Credential is retrieved and stored in the Wallet.<a href="#section-d.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="use-case-1">
<section id="section-d.4">
        <h2 id="name-wallet-initiated-issuance-d">
<a href="#section-d.4" class="section-number selfRef">D.4. </a><a href="#name-wallet-initiated-issuance-d" class="section-name selfRef">Wallet Initiated Issuance during Presentation</a>
        </h2>
<p id="section-d.4-1">A user comes across a verifier app that is requesting the user to present a Credential, e.g., a driving license. The Wallet determines the requested Credential type(s) from the Credential presentation request and notifies the user that there is currently no matching Credential in the Wallet. The Wallet determines a Credential Issuer capable of issuing the lacking Credential and upon user consent sends the user to the Credential Issuer's user experience (web site or app). Upon being authenticated and providing consent to issue the Credential into her Wallet, the user is sent back to the Wallet. The Wallet informs the user Credential was successfully issued into the Wallet and is ready to be presented to the verifier app that originally requested presentation of that Credential.<a href="#section-d.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="use-case-2">
<section id="section-d.5">
        <h2 id="name-wallet-initiated-issuance-du">
<a href="#section-d.5" class="section-number selfRef">D.5. </a><a href="#name-wallet-initiated-issuance-du" class="section-name selfRef">Wallet Initiated Issuance during Presentation (requires presentation of additional Credentials during issuance)</a>
        </h2>
<p id="section-d.5-1">A user comes across a verifier app that is requesting the user to present a Credential, e.g., a university diploma. The Wallet determines the requested Credential type(s) from the Credential presentation request and notifies the user that there is currently no matching Credential in the Wallet. The Wallet then offers the user a list of Credential Issuers, which might be based on a Credential Issuer list curated by the Wallet provider. The user picks the university she graduated from and is sent to that university's user experience (web site or app).<a href="#section-d.5-1" class="pilcrow">¶</a></p>
<p id="section-d.5-2">The user logs in to the university, which determines that the respective user account is not verified yet. Among multiple identification options, the user chooses to present identity Credential from her Wallet. The user is sent back to the Wallet where she consents to share requested Credential(s) to the university. The user is sent back to the university user experience. Based on the presented Credential, the university completes the user verification, looks up user data in its database, and offers to issue a diploma as a verifiable Credential.<a href="#section-d.5-2" class="pilcrow">¶</a></p>
<p id="section-d.5-3">Upon providing consent, the user is sent back to the Wallet. The Wallet informs the user Credential was successfully issued into the Wallet and is ready to be presented to the verifier app that originally requested presentation of that Credential.<a href="#section-d.5-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="format_profiles">
<section id="section-appendix.e">
      <h2 id="name-credential-format-profiles">
<a href="#section-appendix.e" class="section-number selfRef">Appendix E. </a><a href="#name-credential-format-profiles" class="section-name selfRef">Credential Format Profiles</a>
      </h2>
<p id="section-appendix.e-1">This specification defines several extension points to accommodate the differences across Credential formats. Sets of Credential format specific parameters or claims referred to as Credential format Identifiers are identified by the Credential format identifier and used at each extension point.<a href="#section-appendix.e-1" class="pilcrow">¶</a></p>
<p id="section-appendix.e-2">This section defines Credential Format Profiles for selected Credential formats.<a href="#section-appendix.e-2" class="pilcrow">¶</a></p>
<div id="w3c-verifiable-credentials">
<section id="section-e.1">
        <h2 id="name-w3c-verifiable-credentials">
<a href="#section-e.1" class="section-number selfRef">E.1. </a><a href="#name-w3c-verifiable-credentials" class="section-name selfRef">W3C Verifiable Credentials</a>
        </h2>
<p id="section-e.1-1">Sections 6.1 and 6.2 of <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span> defines how Verifiable Credentials may or may not use JSON-LD. As acknowleged in Sections 4.1 of <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span>, implementations can behave differently regarding processing of the <code>@context</code> property whether JSON-LD is used or not.<a href="#section-e.1-1" class="pilcrow">¶</a></p>
<p id="section-e.1-2">This specification therefore differentiates the following three Credential formats for W3C Verifiable Credentials:<a href="#section-e.1-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1-3.1">
            <p id="section-e.1-3.1.1">VC signed as a JWT, not using JSON-LD (<code>jwt_vc_json</code>)<a href="#section-e.1-3.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1-3.2">
            <p id="section-e.1-3.2.1">VC signed as a JWT, using JSON-LD (<code>jwt_vc_json-ld</code>)<a href="#section-e.1-3.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1-3.3">
            <p id="section-e.1-3.3.1">VC secured using Data Integrity, using JSON-LD, with proof suite requiring Linked Data canonicalization (<code>ldp_vc</code>)<a href="#section-e.1-3.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.1-4">Note that VCs secured using Data Integrity may not necessarily use JSON-LD and may not necessarily use proof suites requiring Linked Data canonicalization. Credential Format Profiles for them may be defined in the future versions of this specification.<a href="#section-e.1-4" class="pilcrow">¶</a></p>
<p id="section-e.1-5">Distinct Credential formats identifiers, extension parameters/claims and processing rules are defined for each of the above-mentioned Credential formats.<a href="#section-e.1-5" class="pilcrow">¶</a></p>
<div id="vc-signed-as-a-jwt-not-using-json-ld">
<section id="section-e.1.1">
          <h3 id="name-vc-signed-as-a-jwt-not-usin">
<a href="#section-e.1.1" class="section-number selfRef">E.1.1. </a><a href="#name-vc-signed-as-a-jwt-not-usin" class="section-name selfRef">VC signed as a JWT, not using JSON-LD</a>
          </h3>
<div id="format-identifier">
<section id="section-e.1.1.1">
            <h4 id="name-format-identifier">
<a href="#section-e.1.1.1" class="section-number selfRef">E.1.1.1. </a><a href="#name-format-identifier" class="section-name selfRef">Format Identifier</a>
            </h4>
<p id="section-e.1.1.1-1">The Credential format identifier is <code>jwt_vc_json</code>.<a href="#section-e.1.1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="server_metadata_jwt_vc_json">
<section id="section-e.1.1.2">
            <h4 id="name-server-metadata">
<a href="#section-e.1.1.2" class="section-number selfRef">E.1.1.2. </a><a href="#name-server-metadata" class="section-name selfRef">Server Metadata</a>
            </h4>
<p id="section-e.1.1.2-1">The following additional server metadata are defined for this Credential format.<a href="#section-e.1.1.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.1.2-2.1">
                <p id="section-e.1.1.2-2.1.1"><code>types</code>: REQUIRED. JSON array designating the types a certain credential type supports according to <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span>, Section 4.3.<a href="#section-e.1.1.2-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.1.2-2.2">
                <p id="section-e.1.1.2-2.2.1"><code>credentialSubject</code>: OPTIONAL. A JSON object containing a list of key value pairs, where the key identifies the claim offered in the Credential. The value MAY be a dictionary, which allows to represent the full (potentially deeply nested) structure of the verifiable credential to be issued. The value is a JSON object detailing the specifics about the support for the claim with a following non-exhaustive list of parameters that MAY be included:<a href="#section-e.1.1.2-2.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.1.2-2.2.2.1">
                    <p id="section-e.1.1.2-2.2.2.1.1"><code>mandatory</code>: OPTIONAL. Boolean which when set to <code>true</code> indicates the claim MUST be present in the issued Credential. If the <code>mandatory</code> property is omitted its default should be assumed to be <code>false</code>.<a href="#section-e.1.1.2-2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.1.2-2.2.2.2">
                    <p id="section-e.1.1.2-2.2.2.2.1"><code>value_type</code>: OPTIONAL. String value determining type of value of the claim. A non-exhaustive list of valid values defined by this specification are <code>string</code>, <code>number</code>, and image media types such as <code>image/jpeg</code> as defined in IANA media type registry for images (<a href="https://www.iana.org/assignments/media-types/media-types.xhtml#image">https://www.iana.org/assignments/media-types/media-types.xhtml#image</a>).<a href="#section-e.1.1.2-2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.1.2-2.2.2.3">
                    <p id="section-e.1.1.2-2.2.2.3.1"><code>display</code>: OPTIONAL. An array of objects, where each object contains display properties of a certain claim in the Credential for a certain language. Below is a non-exhaustive list of valid parameters that MAY be included:<a href="#section-e.1.1.2-2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.1.2-2.2.2.4">
                    <p id="section-e.1.1.2-2.2.2.4.1"><code>name</code>: OPTIONAL. String value of a display name for the claim.<a href="#section-e.1.1.2-2.2.2.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.1.2-2.2.2.5">
                    <p id="section-e.1.1.2-2.2.2.5.1"><code>locale</code>: OPTIONAL. String value that identifies language of this object represented as language tag values defined in BCP47 <span>[<a href="#RFC5646" class="xref">RFC5646</a>]</span>. There MUST be only one object with the same language identifier.<a href="#section-e.1.1.2-2.2.2.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li id="section-e.1.1.2-2.3">
                <p id="section-e.1.1.2-2.3.1"><code>order</code>: OPTIONAL. An array of claims.display.name values that lists them in the order they should be displayed by the Wallet.<a href="#section-e.1.1.2-2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.1.1.2-3">The following is a non-normative example of a Supported Credentials Object of type <code>jwt_vc_json</code>.<a href="#section-e.1.1.2-3" class="pilcrow">¶</a></p>
<div id="section-e.1.1.2-4">
<pre class="sourcecode lang-json">{
    "format": "jwt_vc_json",
    "id": "UniversityDegree_JWT",
    "types": [
        "VerifiableCredential",
        "UniversityDegreeCredential"
    ],
    "cryptographic_binding_methods_supported": [
        "did"
    ],
    "cryptographic_suites_supported": [
        "ES256K"
    ],
    "display": [
        {
            "name": "University Credential",
            "locale": "en-US",
            "logo": {
                "url": "https://exampleuniversity.com/public/logo.png",
                "alternative_text": "a square logo of a university"
            },
            "background_color": "#12107c",
            "text_color": "#FFFFFF"
        }
    ],
    "credentialSubject": {
        "given_name": {
            "display": [
                {
                    "name": "Given Name",
                    "locale": "en-US"
                }
            ]
        },
        "last_name": {
            "display": [
                {
                    "name": "Surname",
                    "locale": "en-US"
                }
            ]
        },
        "degree": {},
        "gpa": {
            "display": [
                {
                    "name": "GPA"
                }
            ]
        }
    }
}
</pre><a href="#section-e.1.1.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential-offer">
<section id="section-e.1.1.3">
            <h4 id="name-credential-offer-2">
<a href="#section-e.1.1.3" class="section-number selfRef">E.1.1.3. </a><a href="#name-credential-offer-2" class="section-name selfRef">Credential Offer</a>
            </h4>
<p id="section-e.1.1.3-1">The following additional claims are defined for this Credential format.<a href="#section-e.1.1.3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.1.3-2.1">
                <p id="section-e.1.1.3-2.1.1"><code>types</code>: REQUIRED. as defined in <a href="#server_metadata_jwt_vc_json" class="xref">Appendix E.1.1.2</a>. This claim contains the type values the wallet shall request in the subsequent credential issuance request.<a href="#section-e.1.1.3-2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.1.1.3-3">The following is a non-normative example of a Supported Credentials Object of type <code>jwt_vc_json</code>.<a href="#section-e.1.1.3-3" class="pilcrow">¶</a></p>
<div id="section-e.1.1.3-4">
<pre class="sourcecode lang-json">{
    "issuer": "https://issuer.example.com",
    "credentials": [
        {
            "format": "jwt_vc_json",
            "types": [
                "VerifiableCredential",
                "UniversityDegreeCredential"
            ]
        }
    ],
    "issuer_state": "eyJhbGciOiJSU0Et...FYUaBy"
}
</pre><a href="#section-e.1.1.3-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="authorization_jwt_vc_json">
<section id="section-e.1.1.4">
            <h4 id="name-authorization-deails">
<a href="#section-e.1.1.4" class="section-number selfRef">E.1.1.4. </a><a href="#name-authorization-deails" class="section-name selfRef">Authorization Deails</a>
            </h4>
<p id="section-e.1.1.4-1">The following additional claims are defined for authorization details of type <code>openid_credential</code> and this Credential format.<a href="#section-e.1.1.4-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.1.4-2.1">
                <p id="section-e.1.1.4-2.1.1"><code>types</code>: REQUIRED. as defined in <a href="#server_metadata_jwt_vc_json" class="xref">Appendix E.1.1.2</a>. This claim contains the type values the wallet requests authorization for at the issuer.<a href="#section-e.1.1.4-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.1.4-2.2">
                <p id="section-e.1.1.4-2.2.1"><code>credentialSubject</code>: OPTIONAL. A JSON object containing a list of key value pairs, where the key identifies the claim offered in the Credential. The value MAY be a dictionary, which allows to represent the full (potentially deeply nested) structure of the verifiable credential to be issued. This object indicates the claims the wallet would like to turn up in the credential to be issued.<a href="#section-e.1.1.4-2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.1.1.4-3">The following is a non-normative example of an authorization details object with Credential format <code>jwt_vc_json</code>.<a href="#section-e.1.1.4-3" class="pilcrow">¶</a></p>
<div id="section-e.1.1.4-4">
<pre class="sourcecode lang-json">[
    {
        "type": "openid_credential",
        "format": "jwt_vc_json",
        "types": [
            "VerifiableCredential",
            "UniversityDegreeCredential"
        ],
        "CredentialSubject": {
            "given_name": {},
            "last_name": {},
            "degree": {},
        }
    }
]
</pre><a href="#section-e.1.1.4-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential-request">
<section id="section-e.1.1.5">
            <h4 id="name-credential-request-2">
<a href="#section-e.1.1.5" class="section-number selfRef">E.1.1.5. </a><a href="#name-credential-request-2" class="section-name selfRef">Credential Request</a>
            </h4>
<p id="section-e.1.1.5-1">The following additional parameters are defined for credential issuance requests and this Credential format.<a href="#section-e.1.1.5-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.1.5-2.1">
                <p id="section-e.1.1.5-2.1.1"><code>types</code>: REQUIRED. as defined in <a href="#authorization_jwt_vc_json" class="xref">Appendix E.1.1.4</a>. The credential issued by the issuer MUST at least contain the values listed in this claim.<a href="#section-e.1.1.5-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.1.5-2.2">
                <p id="section-e.1.1.5-2.2.1"><code>credentialSubject</code>: OPTIONAL. as defined in <a href="#authorization_jwt_vc_json" class="xref">Appendix E.1.1.4</a>. This object determines the optional claims to be added to the credential to be issued.<a href="#section-e.1.1.5-2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.1.1.5-3">The following is a non-normative example of a Credential Issuance Request with Credential format <code>jwt_vc_json</code>.<a href="#section-e.1.1.5-3" class="pilcrow">¶</a></p>
<div id="section-e.1.1.5-4">
<pre class="sourcecode lang-json">{
   "format": "jwt_vc_json",
   "types": [
      "VerifiableCredential",
      "UniversityDegreeCredential"
   ],
   "CredentialSubject": {
      "given_name": {},
      "last_name": {},
      "degree": {}
   },
   "proof": {
      "proof_type": "jwt",
      "jwt":"eyJraWQiOiJkaWQ6ZXhhbXBsZTplYmZlYjFmNzEyZWJjNmYxYzI3NmUxMmVjMjEva2V5cy8
      xIiwiYWxnIjoiRVMyNTYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJzNkJoZFJrcXQzIiwiYXVkIjoiaHR
      0cHM6Ly9zZXJ2ZXIuZXhhbXBsZS5jb20iLCJpYXQiOiIyMDE4LTA5LTE0VDIxOjE5OjEwWiIsIm5vbm
      NlIjoidFppZ25zbkZicCJ9.ewdkIkPV50iOeBUqMXCC_aZKPxgihac0aW9EkL1nOzM"
   }
}
</pre><a href="#section-e.1.1.5-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential_response_jwt_vc_json">
<section id="section-e.1.1.6">
            <h4 id="name-credential-response-2">
<a href="#section-e.1.1.6" class="section-number selfRef">E.1.1.6. </a><a href="#name-credential-response-2" class="section-name selfRef">Credential Response</a>
            </h4>
<p id="section-e.1.1.6-1">The value of the <code>credential</code> claim in the credential response MUST be a JSON String. Credentials of this format are already a sequence of base64url-encoded values separated by period characters and MUST NOT be re-encoded.<a href="#section-e.1.1.6-1" class="pilcrow">¶</a></p>
<p id="section-e.1.1.6-2">The following is a non-normative example of a credential issuance response with Credential format <code>jwt_vc_json</code>.<a href="#section-e.1.1.6-2" class="pilcrow">¶</a></p>
<div id="section-e.1.1.6-3">
<pre class="sourcecode lang-txt">
  HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store

{
    "format": "ldp_vc",
    "credential": "eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJ2YyI6eyJAY29udGV4dCI
    6WyJodHRwczovL3d3dy53My5vcmcvMjAxOC9jcmVkZW50aWFscy92MSIsImh0dHBzOi8vd3d3Ln
    czLm9yZy8yMDE4L2NyZWRlbnRpYWxzL2V4YW1wbGVzL3YxIl0sImlkIjoiaHR0cDovL2V4YW1wb
    GUuZWR1L2NyZWRlbnRpYWxzLzM3MzIiLCJ0eXBlIjpbIlZlcmlmaWFibGVDcmVkZW50aWFsIiwi
    VW5pdmVyc2l0eURlZ3JlZUNyZWRlbnRpYWwiXSwiaXNzdWVyIjoiaHR0cHM6Ly9leGFtcGxlLmV
    kdS9pc3N1ZXJzLzU2NTA0OSIsImlzc3VhbmNlRGF0ZSI6IjIwMTAtMDEtMDFUMDA6MDA6MDBaIi
    wiY3JlZGVudGlhbFN1YmplY3QiOnsiaWQiOiJkaWQ6ZXhhbXBsZTplYmZlYjFmNzEyZWJjNmYxY
    zI3NmUxMmVjMjEiLCJkZWdyZWUiOnsidHlwZSI6IkJhY2hlbG9yRGVncmVlIiwibmFtZSI6IkJh
    Y2hlbG9yIG9mIFNjaWVuY2UgYW5kIEFydHMifX19LCJpc3MiOiJodHRwczovL2V4YW1wbGUuZWR
    1L2lzc3VlcnMvNTY1MDQ5IiwibmJmIjoxMjYyMzA0MDAwLCJqdGkiOiJodHRwOi8vZXhhbXBsZS
    5lZHUvY3JlZGVudGlhbHMvMzczMiIsInN1YiI6ImRpZDpleGFtcGxlOmViZmViMWY3MTJlYmM2Z
    jFjMjc2ZTEyZWMyMSJ9.z5vgMTK1nfizNCg5N-niCOL3WUIAL7nXy-nGhDZYO_-PNGeE-0djCpW
    AMH8fD8eWSID5PfkPBYkx_dfLJnQ7NA",
    "c_nonce": "fGFF7UkhLa",
    "c_nonce_expires_in": 86400
}


</pre><a href="#section-e.1.1.6-3" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="vc-signed-as-a-jwt-using-json-ld">
<section id="section-e.1.2">
          <h3 id="name-vc-signed-as-a-jwt-using-js">
<a href="#section-e.1.2" class="section-number selfRef">E.1.2. </a><a href="#name-vc-signed-as-a-jwt-using-js" class="section-name selfRef">VC signed as a JWT, using JSON-LD</a>
          </h3>
<div id="format-identifier-1">
<section id="section-e.1.2.1">
            <h4 id="name-format-identifier-2">
<a href="#section-e.1.2.1" class="section-number selfRef">E.1.2.1. </a><a href="#name-format-identifier-2" class="section-name selfRef">Format Identifier</a>
            </h4>
<p id="section-e.1.2.1-1">The Credential format identifier is <code>jwt_vc_json-ld</code>.<a href="#section-e.1.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="server-metadata">
<section id="section-e.1.2.2">
            <h4 id="name-server-metadata-2">
<a href="#section-e.1.2.2" class="section-number selfRef">E.1.2.2. </a><a href="#name-server-metadata-2" class="section-name selfRef">Server Metadata</a>
            </h4>
<p id="section-e.1.2.2-1">The definitions in <a href="#server_metadata_ldp_vc" class="xref">Appendix E.1.3.2</a> apply for metadata of credentials of this type as well.<a href="#section-e.1.2.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="credential-offer-1">
<section id="section-e.1.2.3">
            <h4 id="name-credential-offer-3">
<a href="#section-e.1.2.3" class="section-number selfRef">E.1.2.3. </a><a href="#name-credential-offer-3" class="section-name selfRef">Credential Offer</a>
            </h4>
<p id="section-e.1.2.3-1">The definitions in <a href="#issuer_initiated_issuance_ldp_vc" class="xref">Appendix E.1.3.3</a> apply for credentials of this type as well.<a href="#section-e.1.2.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authorization-deails">
<section id="section-e.1.2.4">
            <h4 id="name-authorization-deails-2">
<a href="#section-e.1.2.4" class="section-number selfRef">E.1.2.4. </a><a href="#name-authorization-deails-2" class="section-name selfRef">Authorization Deails</a>
            </h4>
<p id="section-e.1.2.4-1">The definitions in <a href="#issuer_initiated_issuance_ldp_vc" class="xref">Appendix E.1.3.3</a> apply for credentials of this type as well.<a href="#section-e.1.2.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="credential-request-1">
<section id="section-e.1.2.5">
            <h4 id="name-credential-request-3">
<a href="#section-e.1.2.5" class="section-number selfRef">E.1.2.5. </a><a href="#name-credential-request-3" class="section-name selfRef">Credential Request</a>
            </h4>
<p id="section-e.1.2.5-1">The definitions in <a href="#credential_request_ldp_vc" class="xref">Appendix E.1.3.5</a> apply for credentials of this type as well.<a href="#section-e.1.2.5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="credential-response-1">
<section id="section-e.1.2.6">
            <h4 id="name-credential-response-3">
<a href="#section-e.1.2.6" class="section-number selfRef">E.1.2.6. </a><a href="#name-credential-response-3" class="section-name selfRef">Credential Response</a>
            </h4>
<p id="section-e.1.2.6-1">The definitions in <a href="#credential_response_jwt_vc_json" class="xref">Appendix E.1.1.6</a> apply for credentials of this type as well.<a href="#section-e.1.2.6-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="vc-secured-using-data-integrity-using-json-ld-with-proof-suite-requiring-linked-data-canonicalization">
<section id="section-e.1.3">
          <h3 id="name-vc-secured-using-data-integ">
<a href="#section-e.1.3" class="section-number selfRef">E.1.3. </a><a href="#name-vc-secured-using-data-integ" class="section-name selfRef">VC secured using Data Integrity, using JSON-LD, with proof suite requiring Linked Data canonicalization</a>
          </h3>
<div id="format-identifier-2">
<section id="section-e.1.3.1">
            <h4 id="name-format-identifier-3">
<a href="#section-e.1.3.1" class="section-number selfRef">E.1.3.1. </a><a href="#name-format-identifier-3" class="section-name selfRef">Format Identifier</a>
            </h4>
<p id="section-e.1.3.1-1">The Credential format identifier is <code>ldp_vc</code>.<a href="#section-e.1.3.1-1" class="pilcrow">¶</a></p>
<p id="section-e.1.3.1-2">Note that Data Integrity used to be called Linked Data Proofs, hence "ldp" in the Credential format identifier.<a href="#section-e.1.3.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="server_metadata_ldp_vc">
<section id="section-e.1.3.2">
            <h4 id="name-server-metadata-3">
<a href="#section-e.1.3.2" class="section-number selfRef">E.1.3.2. </a><a href="#name-server-metadata-3" class="section-name selfRef">Server Metadata</a>
            </h4>
<p id="section-e.1.3.2-1">The following additional server metadata are defined for this Credential format.<a href="#section-e.1.3.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.3.2-2.1">
                <p id="section-e.1.3.2-2.1.1"><code>@context</code>: REQUIRED. JSON array as defined in <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span>, Section 4.1.<a href="#section-e.1.3.2-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.3.2-2.2">
                <p id="section-e.1.3.2-2.2.1"><code>types</code>: REQUIRED. JSON array designating the types a certain credential type supports according to <span>[<a href="#VC_DATA" class="xref">VC_DATA</a>]</span>, Section 4.3.<a href="#section-e.1.3.2-2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.3.2-2.3">
                <p id="section-e.1.3.2-2.3.1"><code>credentialSubject</code>: OPTIONAL. A JSON object containing a list of key value pairs, where the key identifies the claim offered in the Credential. The value MAY be a dictionary, which allows to represent the full (potentially deeply nested) structure of the verifiable credential to be issued. The value is a JSON object detailing the specifics about the support for the claim with a following non-exhaustive list of parameters that MAY be included:<a href="#section-e.1.3.2-2.3.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.3.2-2.3.2.1">
                    <p id="section-e.1.3.2-2.3.2.1.1"><code>mandatory</code>: OPTIONAL. Boolean which when set to <code>true</code> indicates the claim MUST be present in the issued Credential. If the <code>mandatory</code> property is omitted its default should be assumed to be <code>false</code>.<a href="#section-e.1.3.2-2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.3.2-2.3.2.2">
                    <p id="section-e.1.3.2-2.3.2.2.1"><code>value_type</code>: OPTIONAL. String value determining type of value of the claim. A non-exhaustive list of valid values defined by this specification are <code>string</code>, <code>number</code>, and image media types such as <code>image/jpeg</code> as defined in IANA media type registry for images (<a href="https://www.iana.org/assignments/media-types/media-types.xhtml#image">https://www.iana.org/assignments/media-types/media-types.xhtml#image</a>).<a href="#section-e.1.3.2-2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.3.2-2.3.2.3">
                    <p id="section-e.1.3.2-2.3.2.3.1"><code>display</code>: OPTIONAL. An array of objects, where each object contains display properties of a certain claim in the Credential for a certain language. Below is a non-exhaustive list of valid parameters that MAY be included:<a href="#section-e.1.3.2-2.3.2.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.3.2-2.3.2.4">
                    <p id="section-e.1.3.2-2.3.2.4.1"><code>name</code>: OPTIONAL. String value of a display name for the claim.<a href="#section-e.1.3.2-2.3.2.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.3.2-2.3.2.5">
                    <p id="section-e.1.3.2-2.3.2.5.1"><code>locale</code>: OPTIONAL. String value that identifies language of this object represented as language tag values defined in BCP47 <span>[<a href="#RFC5646" class="xref">RFC5646</a>]</span>. There MUST be only one object with the same language identifier.<a href="#section-e.1.3.2-2.3.2.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li id="section-e.1.3.2-2.4">
                <p id="section-e.1.3.2-2.4.1"><code>order</code>: OPTIONAL. An array of claims.display.name values that lists them in the order they should be displayed by the Wallet.<a href="#section-e.1.3.2-2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.1.3.2-3">Any Supported Credentials Object of Credential format <code>ldp_vc</code> MUST be processed using full JSON-LD processing.<a href="#section-e.1.3.2-3" class="pilcrow">¶</a></p>
<p id="section-e.1.3.2-4">The following is a non-normative example of a Supported Credentials Object of type <code>ldp_vc</code>.<a href="#section-e.1.3.2-4" class="pilcrow">¶</a></p>
<div id="section-e.1.3.2-5">
<pre class="sourcecode lang-json">{
    "format": "ldp_vc",
    "@context": [
        "https://www.w3.org/2018/credentials/v1",
        "https://www.w3.org/2018/credentials/examples/v1"
    ],
    "types": [
        "VerifiableCredential",
        "UniversityDegreeCredential"
    ],
    "cryptographic_binding_methods_supported": [
        "did"
    ],
    "cryptographic_suites_supported": [
        "Ed25519Signature2018"
    ],
    "display": [
        {
            "name": "University Credential",
            "locale": "en-US",
            "logo": {
                "url": "https://exampleuniversity.com/public/logo.png",
                "alternative_text": "a square logo of a university"
            },
            "background_color": "#12107c",
            "text_color": "#FFFFFF"
        }
    ],
    "credentialSubject": {
        "given_name": {
            "display": [
                {
                    "name": "Given Name",
                    "locale": "en-US"
                }
            ]
        },
        "last_name": {
            "display": [
                {
                    "name": "Surname",
                    "locale": "en-US"
                }
            ]
        },
        "degree": {},
        "gpa": {
            "display": [
                {
                    "name": "GPA"
                }
            ]
        }
    }
}
</pre><a href="#section-e.1.3.2-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="issuer_initiated_issuance_ldp_vc">
<section id="section-e.1.3.3">
            <h4 id="name-credential-offer-4">
<a href="#section-e.1.3.3" class="section-number selfRef">E.1.3.3. </a><a href="#name-credential-offer-4" class="section-name selfRef">Credential Offer</a>
            </h4>
<p id="section-e.1.3.3-1">The following additional claims are defined for this Credential format.<a href="#section-e.1.3.3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.3.3-2.1">
                <p id="section-e.1.3.3-2.1.1"><code>credential_definition</code>: REQUIRED. JSON Object containing (and isolating) the detailed description of the credential type. This object MUST be processed using full JSON-LD processing. It consists of the following sub claims:<a href="#section-e.1.3.3-2.1.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.3.3-2.1.2.1">
                    <p id="section-e.1.3.3-2.1.2.1.1"><code>@context</code>: REQUIRED. as defined in <a href="#server_metadata_ldp_vc" class="xref">Appendix E.1.3.2</a><a href="#section-e.1.3.3-2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.1.3.3-2.1.2.2">
                    <p id="section-e.1.3.3-2.1.2.2.1"><code>types</code>: REQUIRED. as defined in <a href="#server_metadata_ldp_vc" class="xref">Appendix E.1.3.2</a>. This claim contains the type values the wallet shall request in the subsequent credential issuance request.<a href="#section-e.1.3.3-2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
<p id="section-e.1.3.3-3">The following is a non-normative example of a Credential Offer of type <code>ldp_vc</code>.<a href="#section-e.1.3.3-3" class="pilcrow">¶</a></p>
<div id="section-e.1.3.3-4">
<pre class="sourcecode lang-json">{
    "format": "ldp_vc",
    "credential_definition": {
        "@context": [
            "https://www.w3.org/2018/credentials/v1",
            "https://www.w3.org/2018/credentials/examples/v1"
        ],
        "types": [
            "VerifiableCredential",
            "UniversityDegreeCredential"
        ]
    }
}
</pre><a href="#section-e.1.3.3-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="authorization_ldp_vc">
<section id="section-e.1.3.4">
            <h4 id="name-authorization-deails-3">
<a href="#section-e.1.3.4" class="section-number selfRef">E.1.3.4. </a><a href="#name-authorization-deails-3" class="section-name selfRef">Authorization Deails</a>
            </h4>
<p id="section-e.1.3.4-1">The following additional claims are defined for authorization details of type <code>openid_credential</code> and this Credential format.<a href="#section-e.1.3.4-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.3.4-2.1">
                <p id="section-e.1.3.4-2.1.1"><code>credential_definition</code>: REQUIRED. as defined in <a href="#issuer_initiated_issuance_ldp_vc" class="xref">Appendix E.1.3.3</a>.<a href="#section-e.1.3.4-2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.1.3.4-3">The following is a non-normative example of an authorization details object with Credential format <code>ldp_vc</code>.<a href="#section-e.1.3.4-3" class="pilcrow">¶</a></p>
<div id="section-e.1.3.4-4">
<pre class="sourcecode lang-json">[
    {
        "type": "openid_credential",
        "format": "ldp_vc",
        "credential_definition": {
            "@context": [
                "https://www.w3.org/2018/credentials/v1",
                "https://www.w3.org/2018/credentials/examples/v1"
            ],
            "types": [
                "VerifiableCredential",
                "UniversityDegreeCredential"
            ],
            "CredentialSubject": {
                "given_name": {},
                "last_name": {},
                "degree": {}
            }
        }
    }
]
</pre><a href="#section-e.1.3.4-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential_request_ldp_vc">
<section id="section-e.1.3.5">
            <h4 id="name-credential-request-4">
<a href="#section-e.1.3.5" class="section-number selfRef">E.1.3.5. </a><a href="#name-credential-request-4" class="section-name selfRef">Credential Request</a>
            </h4>
<p id="section-e.1.3.5-1">The following additional parameters are defined for credential issuance requests and this Credential format.<a href="#section-e.1.3.5-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.1.3.5-2.1">
                <p id="section-e.1.3.5-2.1.1"><code>credential_definition</code>: REQUIRED. as defined in <a href="#issuer_initiated_issuance_ldp_vc" class="xref">Appendix E.1.3.3</a>.<a href="#section-e.1.3.5-2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.1.3.5-3">The following is a non-normative example of a credential issuance request with Credential format <code>ldp_vc</code>.<a href="#section-e.1.3.5-3" class="pilcrow">¶</a></p>
<div id="section-e.1.3.5-4">
<pre class="sourcecode lang-json">{
   "format": "ldp_vc",
   "credential_definition": {
      "@context": [
         "https://www.w3.org/2018/credentials/v1",
         "https://www.w3.org/2018/credentials/examples/v1"
      ],
      "types": [
         "VerifiableCredential",
         "UniversityDegreeCredential"
      ],
      "credentialSubject": {
         "degree": {
            "type": {}
         }
      }
   },
   "proof": {
      "proof_type": "jwt",
      "jwt": "eyJraWQiOiJkaWQ6ZXhhbXBsZ...KPxgihac0aW9EkL1nOzM"
   }
}
</pre><a href="#section-e.1.3.5-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential-response-2">
<section id="section-e.1.3.6">
            <h4 id="name-credential-response-4">
<a href="#section-e.1.3.6" class="section-number selfRef">E.1.3.6. </a><a href="#name-credential-response-4" class="section-name selfRef">Credential Response</a>
            </h4>
<p id="section-e.1.3.6-1">The value of the <code>credential</code> claim in the credential response MUST be a JSON Object. Credentials of this format MUST NOT be re-encoded.<a href="#section-e.1.3.6-1" class="pilcrow">¶</a></p>
<p id="section-e.1.3.6-2">The following is a non-normative example of a credential issuance response with Credential format <code>ldp_vc</code>.<a href="#section-e.1.3.6-2" class="pilcrow">¶</a></p>
<div id="section-e.1.3.6-3">
<pre class="sourcecode lang-txt">  HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store

{
    "format": "ldp_vc",
    "credential": {
        "@context": [
            "https://www.w3.org/2018/credentials/v1",
            "https://www.w3.org/2018/credentials/examples/v1"
        ],
        "id": "http://example.edu/credentials/3732",
        "type": [
            "VerifiableCredential",
            "UniversityDegreeCredential"
        ],
        "issuer": "https://example.edu/issuers/565049",
        "issuanceDate": "2010-01-01T00:00:00Z",
        "credentialSubject": {
            "id": "did:example:ebfeb1f712ebc6f1c276e12ec21",
            "degree": {
                "type": "BachelorDegree",
                "name": "Bachelor of Science and Arts"
            }
        },
        "proof": {
            "type": "Ed25519Signature2020",
            "created": "2022-02-25T14:58:43Z",
            "verificationMethod": "https://example.edu/issuers/565049#key-1",
            "proofPurpose": "assertionMethod",
            "proofValue": "zeEdUoM7m9cY8ZyTpey83yBKeBcmcvbyrEQzJ19rD2UXArU2U1jPGoEt
                           rRvGYppdiK37GU4NBeoPakxpWhAvsVSt"
        }
    },
    "c_nonce": "fGFF7UkhLa",
    "c_nonce_expires_in": 86400
}
</pre><a href="#section-e.1.3.6-3" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="iso-mdl">
<section id="section-e.2">
        <h2 id="name-iso-mdl">
<a href="#section-e.2" class="section-number selfRef">E.2. </a><a href="#name-iso-mdl" class="section-name selfRef">ISO mDL</a>
        </h2>
<p id="section-e.2-1">This section defines a Credential Format Profile for credentials complying with <span>[<a href="#ISO.18013-5" class="xref">ISO.18013-5</a>]</span>.<a href="#section-e.2-1" class="pilcrow">¶</a></p>
<div id="format-identifier-3">
<section id="section-e.2.1">
          <h3 id="name-format-identifier-4">
<a href="#section-e.2.1" class="section-number selfRef">E.2.1. </a><a href="#name-format-identifier-4" class="section-name selfRef">Format Identifier</a>
          </h3>
<p id="section-e.2.1-1">The Credential format identifier is <code>mso_mdoc</code>.<a href="#section-e.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="server_metadata_mso_mdoc">
<section id="section-e.2.2">
          <h3 id="name-server-metadata-4">
<a href="#section-e.2.2" class="section-number selfRef">E.2.2. </a><a href="#name-server-metadata-4" class="section-name selfRef">Server Metadata</a>
          </h3>
<p id="section-e.2.2-1">The following additional server metadata are defined for this Credential format.<a href="#section-e.2.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.2.2-2.1">
              <p id="section-e.2.2-2.1.1"><code>doctype</code>: REQUIRED. JSON string identifying the credential type.<a href="#section-e.2.2-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.2.2-2.2">
              <p id="section-e.2.2-2.2.1"><code>claims</code>: OPTIONAL. A JSON object containing a list of key value pairs, where the key is a certain <code>namespace</code> as defined in <span>[<a href="#ISO.18013-5" class="xref">ISO.18013-5</a>]</span> (or any profile of it), and the value is a JSON object. This object also contains a list of key value pairs, where the key is a claim that is defined in the respective namespace and is offered in the Credential. The value is a JSON object detailing the specifics of the claim with a following non-exhaustive list of parameters that MAY be included:<a href="#section-e.2.2-2.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.2.2-2.2.2.1">
                  <p id="section-e.2.2-2.2.2.1.1"><code>mandatory</code>: OPTIONAL. Boolean which when set to <code>true</code> indicates the claim MUST be present in the issued Credential. If the <code>mandatory</code> property is omitted its default should be assumed to be <code>false</code>.<a href="#section-e.2.2-2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.2.2-2.2.2.2">
                  <p id="section-e.2.2-2.2.2.2.1"><code>value_type</code>: OPTIONAL. String value determining type of value of the claim. A non-exhaustive list of valid values defined by this specification are <code>string</code>, <code>number</code>, and image media types such as <code>image/jpeg</code> as defined in IANA media type registry for images (<a href="https://www.iana.org/assignments/media-types/media-types.xhtml#image">https://www.iana.org/assignments/media-types/media-types.xhtml#image</a>).<a href="#section-e.2.2-2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.2.2-2.2.2.3">
                  <p id="section-e.2.2-2.2.2.3.1"><code>display</code>: OPTIONAL. An array of objects, where each object contains display properties of a certain claim in the Credential for a certain language. Below is a non-exhaustive list of valid parameters that MAY be included:<a href="#section-e.2.2-2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.2.2-2.2.2.4">
                  <p id="section-e.2.2-2.2.2.4.1"><code>name</code>: OPTIONAL. String value of a display name for the claim.<a href="#section-e.2.2-2.2.2.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.2.2-2.2.2.5">
                  <p id="section-e.2.2-2.2.2.5.1"><code>locale</code>: OPTIONAL. String value that identifies language of this object represented as language tag values defined in BCP47 <span>[<a href="#RFC5646" class="xref">RFC5646</a>]</span>. There MUST be only one object with the same language identifier.<a href="#section-e.2.2-2.2.2.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li id="section-e.2.2-2.3">
              <p id="section-e.2.2-2.3.1"><code>order</code>: OPTIONAL. An array of claims.display.name values that lists them in the order they should be displayed by the Wallet.<a href="#section-e.2.2-2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.2.2-3">The following is a non-normative example of a Supported Credentials Object of type <code>mso_mdoc</code>.<a href="#section-e.2.2-3" class="pilcrow">¶</a></p>
<div id="section-e.2.2-4">
<pre class="sourcecode lang-json">{
    "format": "mso_mdoc",
    "doctype": "org.iso.18013.5.1.mDL",
    "cryptographic_binding_methods_supported": [
        "mso"
    ],
    "cryptographic_suites_supported": [
        "ES256, ES384, ES512"
    ],
    "display": [
        {
            "name": "Mobile Drivers License",
            "locale": "en-US",
            "logo": {
                "url": "https://examplestate.com/public/mdl.png",
                "alternative_text": "a square figure of a mobile drivers license"
            },
            "background_color": "#12107c",
            "text_color": "#FFFFFF"
        },
        {
            "name": "&amp;#22312;&amp;#31821;&amp;#35388;&amp;#26126;&amp;#26360;",
            "locale": "jp-JA",
            "logo": {
                "url": "https://examplestate.com/public/mdl.png",
                "alternative_text": "&amp;#22823;&amp;#23398;&amp;#12398;&amp;#12525;&amp;#12468;"
            },
            "background_color": "#12107c",
            "text_color": "#FFFFFF"
        }
    ],
    "claims": {
        "org.iso.18013.5.1": {
            "given_name": {
                "display": [
                    {
                        "name": "Given Name",
                        "locale": "en-US"
                    },
                    {
                        "name": "&amp;#21517;&amp;#21069;",
                        "locale": "jp-JA"
                    }
                ]
            },
            "last_name": {
                "display": [
                    {
                        "name": "Surname",
                        "locale": "en-US"
                    }
                ]
            },
            "birth_date": {}
        },
        "org.iso.18013.5.1.aamva": {
            "organ_donor": {}
        }
    }
}
</pre><a href="#section-e.2.2-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential-offer-2">
<section id="section-e.2.3">
          <h3 id="name-credential-offer-5">
<a href="#section-e.2.3" class="section-number selfRef">E.2.3. </a><a href="#name-credential-offer-5" class="section-name selfRef">Credential Offer</a>
          </h3>
<p id="section-e.2.3-1">The following additional claims are defined for this Credential format.<a href="#section-e.2.3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.2.3-2.1">
              <p id="section-e.2.3-2.1.1"><code>doctype</code>: REQUIRED. as defined in <a href="#server_metadata_mso_mdoc" class="xref">Appendix E.2.2</a><a href="#section-e.2.3-2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.2.3-3">The following is a non-normative example of an Credential Offer of type <code>mso_mdoc</code>.<a href="#section-e.2.3-3" class="pilcrow">¶</a></p>
<div id="section-e.2.3-4">
<pre class="sourcecode lang-json">{
    "issuer": "https://issuer.example.com",
    "credentials": [
        {
            "format": "mso_mdoc",
            "doctype": "org.iso.18013.5.1.mDL"
        }
    ],
    "pre-authorized_code": "adhjhdjajkdkhjhdj",
    "user_pin_required": true
}
</pre><a href="#section-e.2.3-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="authorization-details-1">
<section id="section-e.2.4">
          <h3 id="name-authorization-details">
<a href="#section-e.2.4" class="section-number selfRef">E.2.4. </a><a href="#name-authorization-details" class="section-name selfRef">Authorization Details</a>
          </h3>
<p id="section-e.2.4-1">The following additional claims are defined for authorization details of type <code>openid_credential</code> and this Credential format.<a href="#section-e.2.4-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.2.4-2.1">
              <p id="section-e.2.4-2.1.1"><code>doctype</code>: REQUIRED. as defined in <a href="#server_metadata_mso_mdoc" class="xref">Appendix E.2.2</a><a href="#section-e.2.4-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.2.4-2.2">
              <p id="section-e.2.4-2.2.1"><code>claims</code>: OPTIONAL. as defined in <a href="#server_metadata_mso_mdoc" class="xref">Appendix E.2.2</a><br><a href="#section-e.2.4-2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.2.4-3">The following is a non-normative example of an authorization details object with Credential format <code>mso_mdoc</code>.<a href="#section-e.2.4-3" class="pilcrow">¶</a></p>
<div id="section-e.2.4-4">
<pre class="sourcecode lang-json">[
    {
        "type": "openid_credential",
        "format": "mso_doc",
        "doctype": "org.iso.18013.5.1.mDL",
        "claims": {
            "org.iso.18013.5.1": {
                "given_name": {},
                "last_name": {},
                "birth_date": {}
            },
            "org.iso.18013.5.1.aamva": {
                "organ_donor": {}
            }
        }
    }
]
</pre><a href="#section-e.2.4-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential-request-2">
<section id="section-e.2.5">
          <h3 id="name-credential-request-5">
<a href="#section-e.2.5" class="section-number selfRef">E.2.5. </a><a href="#name-credential-request-5" class="section-name selfRef">Credential Request</a>
          </h3>
<p id="section-e.2.5-1">The following additional parameters are defined for credential issuance requests and this Credential format.<a href="#section-e.2.5-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-e.2.5-2.1">
              <p id="section-e.2.5-2.1.1"><code>doctype</code>: REQUIRED. as defined in <a href="#server_metadata_mso_mdoc" class="xref">Appendix E.2.2</a><a href="#section-e.2.5-2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-e.2.5-2.2">
              <p id="section-e.2.5-2.2.1"><code>claims</code>: OPTIONAL. as defined in <a href="#server_metadata_mso_mdoc" class="xref">Appendix E.2.2</a><a href="#section-e.2.5-2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-e.2.5-3">The following is a non-normative example of a credential issuance request with Credential format <code>mso_mdoc</code>.<a href="#section-e.2.5-3" class="pilcrow">¶</a></p>
<div id="section-e.2.5-4">
<pre class="sourcecode lang-json">{
   "format": "mso_mdoc",
   "doctype": "org.iso.18013.5.1.mDL",
   "claims": {
      "org.iso.18013.5.1": {
         "given_name": {},
         "last_name": {},
         "birth_date": {}
      },
      "org.iso.18013.5.1.aamva": {
         "organ_donor": {}
      }
   },
   "proof": {
      "proof_type": "jwt",
      "jwt": "eyJraWQiOiJkaWQ6ZXhhbXBsZ...KPxgihac0aW9EkL1nOzM"
   }
}
</pre><a href="#section-e.2.5-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="credential-response-3">
<section id="section-e.2.6">
          <h3 id="name-credential-response-5">
<a href="#section-e.2.6" class="section-number selfRef">E.2.6. </a><a href="#name-credential-response-5" class="section-name selfRef">Credential Response</a>
          </h3>
<p id="section-e.2.6-1">The value of the <code>credential</code> claim in the credential response MUST be a a JSON string that is the base64url-encoded representation of the issued Credential.<a href="#section-e.2.6-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="document-history">
<section id="section-appendix.f">
      <h2 id="name-document-history">
<a href="#section-appendix.f" class="section-number selfRef">Appendix F. </a><a href="#name-document-history" class="section-name selfRef">Document History</a>
      </h2>
<p id="section-appendix.f-1">[[ To be removed from the final specification ]]<a href="#section-appendix.f-1" class="pilcrow">¶</a></p>
<p id="section-appendix.f-2">-10<a href="#section-appendix.f-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-3.1">
          <p id="section-appendix.f-3.1.1">relaxed client identification requirements for pre-authorized code grant type<a href="#section-appendix.f-3.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-3.2">
          <p id="section-appendix.f-3.2.1">renamed issuance initiation endpoint to Credential Offer Endpoint<a href="#section-appendix.f-3.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-3.3">
          <p id="section-appendix.f-3.3.1">split Credential Issuer and OAuth AS metadata<a href="#section-appendix.f-3.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-appendix.f-4">-09<a href="#section-appendix.f-4" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-5.1">
          <p id="section-appendix.f-5.1.1">reworked credential type identification and issuer metadata<a href="#section-appendix.f-5.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-5.2">
          <p id="section-appendix.f-5.2.1">changed format of issuer initiated credential issuance request to JSON<a href="#section-appendix.f-5.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-5.3">
          <p id="section-appendix.f-5.3.1">added option to include credential data by reference in issuer initiated credential issuance request<a href="#section-appendix.f-5.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-5.4">
          <p id="section-appendix.f-5.4.1">added profiles for W3C VCs and ISO mDL<a href="#section-appendix.f-5.4.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-5.5">
          <p id="section-appendix.f-5.5.1">added batch credential endpoint<a href="#section-appendix.f-5.5.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-appendix.f-6">-08<a href="#section-appendix.f-6" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-7.1">
          <p id="section-appendix.f-7.1.1">reworked use of OAuth scopes to be more flexible for implementers<a href="#section-appendix.f-7.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-7.2">
          <p id="section-appendix.f-7.2.1">added text on scope related error handling<a href="#section-appendix.f-7.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-7.3">
          <p id="section-appendix.f-7.3.1">changed media type of a Credential Request to application/json from application/x-www-form-urlencoded<a href="#section-appendix.f-7.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-appendix.f-8">-07<a href="#section-appendix.f-8" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-9.1">
          <p id="section-appendix.f-9.1.1">restructured the entire specification as following:<a href="#section-appendix.f-9.1.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-9.1.2.1">
              <p id="section-appendix.f-9.1.2.1.1">reorganized defined parameters and mechanisms around endpoints, not the flows<a href="#section-appendix.f-9.1.2.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-9.1.2.2">
              <p id="section-appendix.f-9.1.2.2.1">merged requirements section into a simpler overview section<a href="#section-appendix.f-9.1.2.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-9.1.2.3">
              <p id="section-appendix.f-9.1.2.3.1">moved metadata to the after describing the endpoints<a href="#section-appendix.f-9.1.2.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-9.1.2.4">
              <p id="section-appendix.f-9.1.2.4.1">broke down one large diagram into two simpler ones<a href="#section-appendix.f-9.1.2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
<p id="section-appendix.f-10">-06<a href="#section-appendix.f-10" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-11.1">
          <p id="section-appendix.f-11.1.1">added issuer metadata<a href="#section-appendix.f-11.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-11.2">
          <p id="section-appendix.f-11.2.1">made Credential Response more flexible regarding Credential encoding<a href="#section-appendix.f-11.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-11.3">
          <p id="section-appendix.f-11.3.1">changed file name to match specification name<a href="#section-appendix.f-11.3.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-11.4">
          <p id="section-appendix.f-11.4.1">renamed specification to reflect OAuth 2.0 being the base protocol<a href="#section-appendix.f-11.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-appendix.f-12">-05<a href="#section-appendix.f-12" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-13.1">
          <p id="section-appendix.f-13.1.1">added support for pre-authorized code flow<a href="#section-appendix.f-13.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-13.2">
          <p id="section-appendix.f-13.2.1">changed base protocol to OAuth 2.0<a href="#section-appendix.f-13.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-appendix.f-14">-04<a href="#section-appendix.f-14" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-15.1">
          <p id="section-appendix.f-15.1.1">added support for requesting Credential authorization with scopes<a href="#section-appendix.f-15.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-15.2">
          <p id="section-appendix.f-15.2.1">removed support to pass VPs in the Authorization Request<a href="#section-appendix.f-15.2.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-15.3">
          <p id="section-appendix.f-15.3.1">reworked "proof" parameter definition and added "jwt" proof type<a href="#section-appendix.f-15.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-appendix.f-16">-03<a href="#section-appendix.f-16" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-17.1">
          <p id="section-appendix.f-17.1.1">added issuance initiation endpoint<a href="#section-appendix.f-17.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-17.2">
          <p id="section-appendix.f-17.2.1">Applied cleanups suggested by Mike Jones post adoption<a href="#section-appendix.f-17.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-appendix.f-18">-02<a href="#section-appendix.f-18" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-19.1">
          <p id="section-appendix.f-19.1.1">Adopted as WG document<a href="#section-appendix.f-19.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-appendix.f-20">-01<a href="#section-appendix.f-20" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-21.1">
          <p id="section-appendix.f-21.1.1">Added Request &amp; Response syntax and descriptions<a href="#section-appendix.f-21.1.1" class="pilcrow">¶</a></p>
</li>
<li id="section-appendix.f-21.2">
          <p id="section-appendix.f-21.2.1">Reworked and extended sequence diagram<a href="#section-appendix.f-21.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
<p id="section-appendix.f-22">-00<a href="#section-appendix.f-22" class="pilcrow">¶</a></p>
<ul>
<li id="section-appendix.f-23.1">
          <p id="section-appendix.f-23.1.1">initial revision<a href="#section-appendix.f-23.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.g">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Torsten Lodderstedt</span></div>
<div dir="auto" class="left"><span class="org">yes.com</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:torsten@lodderstedt.net" class="email">torsten@lodderstedt.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Kristina Yasuda</span></div>
<div dir="auto" class="left"><span class="org">Microsoft</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:kristina.yasuda@microsoft.com" class="email">kristina.yasuda@microsoft.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tobias Looker</span></div>
<div dir="auto" class="left"><span class="org">Mattr</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:tobias.looker@mattr.global" class="email">tobias.looker@mattr.global</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
